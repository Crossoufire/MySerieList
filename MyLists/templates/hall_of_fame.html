{% extends "layout.html" %}


{% block css %}
<!------ CDN Datatables ------->
<link href="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.css" rel="stylesheet">
<link href="{{ url_for('static', filename='css/hall_of_fame.css') }}" rel="stylesheet">
{% endblock css %}


{% block content %}
<div class="overflow m-t-30">
    <table id="hall_of_fame" class="table table-sm table-responsive-sm text-light">
        <thead>
            <tr>
                <th class="picture text-center"></th>
                <th class="text-center">Username</th>
                <th class="text-center">Series levels</th>
                <th class="text-center">Anime levels</th>
                <th class="text-center">Movies levels</th>
                <th class="text-center">Knowledge levels</th>
                <th class="follow text-center"></th>
            </tr>
        </thead>
        <tbody>
        {% for user in all_data %}
            <tr>
            {% if current_user.get_id() == '1' %}
                <td>
                    <img class="profile_picture" src="/static/profile_pics/{{ user['profile_picture'] }}" alt="{{ user['username'] }}">
                </td>
                <td>
                    <b><a href="/account/{{ user['username'] }}">{{ user["username"] }}</a></b>
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['series_grade_id'] }}.png">
                    <br>
                    {{ user['series_level'] }} ({{ user['series_percent'] }}%)
                </td>
                <td>
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['anime_grade_id'] }}.png">

                    {{ user['anime_level'] }} ({{ user['anime_percent'] }}%)
                </td>
                <td>
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['movies_grade_id'] }}.png">
                    <br>
                    {{ user['movies_level'] }} ({{ user['movies_percent'] }}%)
                </td>
                <td>
                    <img class="k_grade_picture" src="static/img/knowledge_ranks/{{ user['knowledge_grade_id'] }}.png">
                    <br>
                    {{ user['knowledge_level'] }}
                </td>
                <td></td>

            {% elif user["iscurrentuser"] %}
                <td class="current_user">
                    <img class="profile_picture" src="/static/profile_pics/{{ user['profile_picture'] }}" alt="{{ user['username'] }}">
                </td>
                <td class="current_user">
                    <b><a href="/account/{{ user['username'] }}">{{ user["username"] }}</a></b>
                </td>
                <td class="current_user">
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['series_grade_id'] }}.png">
                    <br>
                    {{ user['series_level'] }} ({{ user['series_percent'] }}%)
                </td>
                <td class="current_user">
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['anime_grade_id'] }}.png">
                    <br>
                    {{ user['anime_level'] }} ({{ user['anime_percent'] }}%)
                </td>
                <td class="current_user">
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['movies_grade_id'] }}.png">
                    <br>
                    {{ user['movies_level'] }} ({{ user['movies_percent'] }}%)
                </td >
                <td class="current_user">
                    <img class="k_grade_picture" src="static/img/knowledge_ranks/{{ user['knowledge_grade_id'] }}.png">
                    <br>
                    {{ user['knowledge_level'] }}
                </td>
                <td class="current_user"></td>

            {% elif user["isprivate"] and not user["isfollowing"] %}
                <td>
                    <img class="profile_picture" src="{{ url_for('static', filename='profile_pics/anonymous.jpg') }}" alt="Anonymous">
                </td>
                <td>
                    <b>Anonymous</b>
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['series_grade_id'] }}.png">
                    <br>
                    {{ user['series_level'] }} ({{ user['series_percent'] }}%)
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['anime_grade_id'] }}.png">
                    <br>
                    {{ user['anime_level'] }} ({{ user['anime_percent'] }}%)
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['movies_grade_id'] }}.png">
                    <br>
                    {{ user['movies_level'] }} ({{ user['movies_percent'] }}%)
                </td>
                <td>
                    <img class="k_grade_picture" src="static/img/knowledge_ranks/{{ user['knowledge_grade_id'] }}.png">
                    <br>
                    {{ user['knowledge_level'] }}
                </td>
                <td></td>

            {% else %}
                <td>
                    <img class="profile_picture" src="/static/profile_pics/{{ user['profile_picture'] }}" alt="{{ user['username'] }}">
                </td>
                <td>
                    <b><a href="/account/{{ user['username'] }}">{{ user['username'] }}</a></b>
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['series_grade_id'] }}.png">
                    <br>
                    {{ user['series_level'] }} ({{ user['series_percent'] }}%)
                </td>
                <td>
                    <img class="grade_picture" src="static/img/levels_ranks/{{ user['anime_grade_id'] }}.png">
                    <br>
                    {{ user['anime_level'] }} ({{ user['anime_percent'] }}%)
                </td>
                <td>
                     <img class="grade_picture" src="static/img/levels_ranks/{{ user['movies_grade_id'] }}.png">
                    <br>
                    {{ user['movies_level'] }} ({{ user['movies_percent'] }}%)
                </td>
                <td>
                    <img class="k_grade_picture" src="static/img/knowledge_ranks/{{ user['knowledge_grade_id'] }}.png">
                    <br>
                    {{ user['knowledge_level'] }}
                </td>
                <td>
                    {% if user["isfollowing"] %}
                        <button id="button_{{ user['id'] }}" class="btn btn-sm btn-dark" onclick="unfollow('{{ user['id'] }}', 'button_{{ user['id'] }}')">Unfollow</button>
                    {% else %}
                        <button id="button_{{ user['id'] }}" class="btn btn-sm btn-primary" onclick="follow('{{ user['id'] }}', 'button_{{ user['id'] }}')">Follow</button>
                    {% endif %}
                </td>
            {% endif %}
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock content %}


{% block script %}
<!--------- CDN Datatables ----------->
<script type="text/javascript" src="https://cdn.datatables.net/v/bs4/dt-1.10.18/datatables.min.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/hall_of_fame.js') }}"></script>
{% endblock script %}

