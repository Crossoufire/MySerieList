{% extends "layout.html" %}


{% block css %}
<link href="{{ url_for('static', filename='css/account.css') }}" rel="stylesheet">
{% endblock css %}


{% block content %}
<div class="header-container">
    <img class="header-profile-img" src="{{ user_data['profile_picture'] }}"/>
    <div class="header-knowledge-level text-center">{{ user_data['knowledge_info']['level'] }}</div>
    <div class="header-profile-data">
        <h2><b>{{ user_data['username'] }}</b>
            <img height='50' width='50' data-toggle="tooltip" title="{{ user_data['knowledge_info']['grade_title'] }}"
             src="{{ user_data['knowledge_info']['grade_id'] }}.png"/>
            {% if user_data['id'] != current_user.get_id() %}
                {% if user_data["isfollowing"] %}
                <button class="btn btn-sm btn-dark follow-btn" onclick="follow_status('{{ user_data['id'] }}')">Unfollow</button>
                {% else %}
                <button class="btn btn-sm btn-primary follow-btn" onclick="follow_status('{{ user_data['id'] }}')">Follow</button>
                {% endif %}
            {% endif %}
        </h2>
        <p class="p-0 m-0">
            <b>Joined: {{ user_data['register'] }}</b><br>
            <b>Followers: {{ user_data['followers'] }}</b>
        </p>
    </div>
</div>

<ul class="nav account-tab">
    <li class="nav-item ml-auto">
        <a id="overview" class="nav-link navbar-account {% if message_tab == 'overview' %} active {% endif %}"
           data-toggle="tab" href="#overview-tab">Overview</a>
    </li>
    <li class="nav-item mr-auto">
        <a class="nav-link navbar-account {% if message_tab == 'follows' %} active {% endif %}"
           data-toggle="tab" href="#follows-tab">Follows</a>
    </li>
</ul>

<div class="tab-content" id="account_tab_content">
    <div id="overview-tab" class="tab-pane fade {% if message_tab == 'overview' %} show active {% endif %}">
        <div class="row m-t-30">
            <div class="col-xl-3 col-lg col-md-12">
                <ul class="p-l-0">
                    <li class="m-b-20">
                        <h4><i class="fas fa-user"></i>&nbsp&nbspBiography
                            {% if user_data['id'] == current_user.get_id() %}
                            <a class="fas fa-sm fa-edit p-t-4 text-light" href="{{ url_for('settings.settings') }}" style="float: right; -webkit-text-stroke: 1px #131418;"></a>
                            {% endif %}
                        </h4>
                        <hr>
                        {% if user_data['biography'] %}
                        <p style="word-wrap: break-word;" class="text-justify m-b-0">{{ user_data['biography'] }}</p>
                        {% elif user_data['id'] == current_user.get_id() %}
                        <p class="text-justify m-b-0" style="color: grey;">
                            <i>No biography yet. Write it now. Click on the pen above to edit.</i>
                        </p>
                        {% else %}
                        <p class="text-justify m-b-0" style="color: grey;"><i>No biography.</i></p>
                        {% endif %}
                    </li>
                    <li class="m-b-20">
                        <h4><i class="fas fa-angle-double-up"></i>&nbsp&nbsp Lists Levels</h4>
                        <hr>
                        <div class="d-flex">
                            <div class='account-bar-wrapper'>
                                <div class='account-bar'>
                                    <img class="float-left m-r-10 m-t-4" height='40' width='40' data-toggle="tooltip"
                                         title="{{ media_data['series']['level_and_grades']['grade_title'] }}" src="{{ media_data['series']['level_and_grades']['grade_id'] }}.png"/>
                                    <span class='account-bar-name'>Series</span>
                                    <div id="series_level" class='account-bar-level'>Level {{ '%02d' | format(media_data['series']['level_and_grades']['level']) }}</div>
                                    <div class='xp-bar' data-toggle="tooltip" title="{{ media_data['series']['level_and_grades']['level_percent'] }}%">
                                        <div id='xp-bar-fill-series' data-percentage="{{ media_data['series']['level_and_grades']['level_percent'] }}">
                                            <div class='xp-increase-fx'>
                                                <div class='xp-increase-fx-flicker'>
                                                    <div class='xp-increase-glow1'></div>
                                                    <div class='xp-increase-glow2'></div>
                                                    <div class='xp-increase-glow3'></div>
                                                </div>
                                                <div class='xp-increase-glow2'></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='account-bar-next-level'>&nbsp{{ '%02d' | format(media_data['series']['level_and_grades']['level'] | int+1) }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class='account-bar-wrapper'>
                                <div class='account-bar'>
                                    <img class="float-left m-r-10 m-t-4" height='40' width='40' data-toggle="tooltip"
                                         title="{{ media_data['anime']['level_and_grades']['grade_title'] }}" src="{{ media_data['anime']['level_and_grades']['grade_id'] }}.png"/>
                                    <div class='account-bar-name'>Anime</div>
                                    <div id="anime_level" class='account-bar-level'>Level {{ '%02d' | format(media_data['anime']['level_and_grades']['level']) }}</div>
                                    <div class='xp-bar' data-toggle="tooltip" title="{{ media_data['anime']['level_and_grades']['level_percent'] }}%">
                                        <div id='xp-bar-fill-anime' data-percentage="{{ media_data['anime']['level_and_grades']['level_percent'] }}">
                                            <div class='xp-increase-fx'>
                                                <div class='xp-increase-fx-flicker'>
                                                    <div class='xp-increase-glow1'></div>
                                                    <div class='xp-increase-glow2'></div>
                                                    <div class='xp-increase-glow3'></div>
                                                </div>
                                                <div class='xp-increase-glow2'></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='account-bar-next-level'>&nbsp{{ '%02d' | format(media_data['anime']['level_and_grades']['level'] | int+1) }}</div>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class='account-bar-wrapper'>
                                <div class='account-bar'>
                                    <img class="float-left m-r-10 m-t-4" height='40' width='40' data-toggle="tooltip"
                                         title="{{ media_data['movies']['level_and_grades']['grade_title'] }}" src="{{ media_data['movies']['level_and_grades']['grade_id'] }}.png"/>
                                    <span class='account-bar-name'>Movies</span>
                                    <div id="movies_level" class='account-bar-level'>Level {{ '%02d' | format(media_data['movies']['level_and_grades']['level']) }}</div>
                                    <div class='xp-bar' data-toggle="tooltip" title="{{ media_data['movies']['level_and_grades']['level_percent'] }}%">
                                        <div id='xp-bar-fill-movies' data-percentage="{{ media_data['movies']['level_and_grades']['level_percent'] }}">
                                            <div class='xp-increase-fx'>
                                                <div class='xp-increase-fx-flicker'>
                                                    <div class='xp-increase-glow1'></div>
                                                    <div class='xp-increase-glow2'></div>
                                                    <div class='xp-increase-glow3'></div>
                                                </div>
                                                <div class='xp-increase-glow2'></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class='account-bar-next-level'>&nbsp{{ '%02d' | format(media_data['movies']['level_and_grades']['level'] | int+1) }}</div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="m-b-20">
                        <div>
                            <h4>
                                <i class="fas fa-bell text-light"></i>
                                &nbsp&nbspFollows' Last Updates
                            </h4>
                        </div>
                        <hr>
                        {% for update in overview_updates %}
                            {% if update['category'] == 'anime' %}
                            <div class="p-2 m-b-5" style="border-bottom: solid 1px #945141;">
                                <div style="font-size: 12pt;">
                                    <i style="color: #945141;" class="fas fa-torii-gate m-r-14" data-toggle="tooltip" title="Anime"></i>
                            {% elif update['category'] == 'series' %}
                            <div class="p-2 m-b-5" style="border-bottom: solid 1px #216e7d;">
                                <div style="font-size: 12pt;">
                                    <i style="color: #216e7d;" class="fas fa-tv m-r-10" data-toggle="tooltip" title="Series"></i>
                            {% elif update['category'] == 'movie' %}
                            <div class="p-2 m-b-5" style="border-bottom: solid 1px #8c7821;">
                                <div style="font-size: 12pt;">
                                    <i style="color: #8c7821;" class="far fa-star m-r-12" data-toggle="tooltip" title="Movie"></i>
                            {% endif %}
                                    <span data-toggle="tooltip" title="{{ update['media_name'] }}">{{ update['media_name'] }}</span>
                                </div>
                                <div class="m-l-35" style="font-size: 11pt;">
                                    {% if update['update']|length == 2 %}
                                        {{ update['update'][0] }}
                                        <i class="fas fa-long-arrow-alt-right m-l-4 m-r-4"></i>
                                        {{ update['update'][1] }}
                                    {% else %}
                                         {{ update['update'][0] }}
                                    {% endif %}
                                </div>
                                <span class="m-l-35" style="color: #b3b3b3; font-size: 10pt;">
                                    <script>
                                        var tz = new Intl.DateTimeFormat().resolvedOptions().timeZone;
                                        var localdate = new Date("{{ update['date'] }}").toLocaleString("en-GB", {timeZone: tz});
                                        var d = new Date("{{ update['date'] }}")
                                        var month = new Array();
                                        month[0] = "Jan";
                                        month[1] = "Feb";
                                        month[2] = "Mar";
                                        month[3] = "Apr";
                                        month[4] = "May";
                                        month[5] = "Jun";
                                        month[6] = "Jul";
                                        month[7] = "Aug";
                                        month[8] = "Sep";
                                        month[9] = "Oct";
                                        month[10] = "Nov";
                                        month[11] = "Dec";
                                        var date_month = month[d.getMonth()];
                                        var date_day = localdate.slice(0,2);
                                        var date_time = localdate.slice(11,17)
                                        document.write(date_day + " " + date_month + " at " + date_time)
                                    </script> by
                                </span>
                                <a href="{{ update['username'] }}" style="color: #359aff; font-size: 11pt;">
                                    {{ update['username'] }}
                                </a>
                            </div>
                        {% endfor %}
                    </li>
                </ul>
            </div>
            <div class="vertical_line"></div>
            <div class="col-xl col-lg-5 col-md-12">
                <ul class="p-l-0">
                    <li>
                        <h4><i class="fas fa-chart-pie"></i>&nbsp&nbspStatistics</h4>
                        <hr>
                        <!------------------------ Series statistics --------------------------->
                        <div class="stats-size">
                            <h5 class="text-center mb-0">
                                <a class="text-light" href="{{ url_for('main.mymedialist', media_list='serieslist', user_name=user_name) }}">
                                   <b>Series </b><i class="fas fa-xs fa-external-link-square-alt"></i>
                                </a>
                            </h5>
                            <div id="SERIES" class="m-b-16">
                                <div class="m-b-5">
                                    <span class="stat-text"><b>Days:</b> {{ media_data['series']['time_spent_day'] }}</span>
                                    <span class="stat-text float-right"><b>Hours:</b> {{ media_data['series']['time_spent_hour'] }}</span>
                                </div>
                                <figure class="d-flex">
                                    {% if media_data['series']['count_and_percentage']['nodata'] %}
                                    <span class="block-no-data" data-toggle="tooltip" title="No data">
                                        <span id="100%" class="value"></span>
                                    </span>
                                    {% else %}
                                    <span class="block" data-toggle="tooltip" title="Watching">
                                        <span id="{{ media_data['series']['count_and_percentage']['Watching']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Completed">
                                        <span id="{{ media_data['series']['count_and_percentage']['Completed']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="On Hold">
                                        <span id="{{ media_data['series']['count_and_percentage']['On Hold']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Random">
                                        <span id="{{ media_data['series']['count_and_percentage']['Random']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Dropped">
                                        <span id="{{ media_data['series']['count_and_percentage']['Dropped']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Plan to Watch">
                                        <span id="{{ media_data['series']['count_and_percentage']['Plan to Watch']['percent'] }}%" class="value"></span>
                                    </span>
                                    {% endif %}
                                </figure>
                                <div class="m-t-10">
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Watching:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['series']['count_and_percentage']['Watching']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Dropped:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['series']['count_and_percentage']['Dropped']['count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Completed:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['series']['count_and_percentage']['Completed']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Plan to Watch:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['series']['count_and_percentage']['Plan to Watch']['count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">On Hold:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['series']['count_and_percentage']['On Hold']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text" data-toggle="tooltip" title="Without plan to watch">Total Series:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text" data-toggle="tooltip" title="Without plan to watch">
                                                {{ media_data['series']['count_and_percentage']['total'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Random:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['series']['count_and_percentage']['Random']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Episodes:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['series']['nb_ep_watched'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <!------------------------- Anime statistics --------------------------->
                        <div class="stats-size">
                            <h5 class="text-center mb-0">
                                <a class="text-light" href="{{ url_for('main.mymedialist', media_list='animelist', user_name=user_name) }}">
                                    <b>Anime </b><i class="fas fa-xs fa-external-link-square-alt"></i>
                                </a>
                            </h5>
                            <div id="ANIME" class="m-b-16">
                                <div class="m-b-5">
                                    <span class="stat-text"><b>Days:</b> {{ media_data['anime']['time_spent_day'] }}</span>
                                    <span class="stat-text float-right"><b>Hours:</b> {{ media_data['anime']['time_spent_hour'] }}</span>
                                </div>
                                <figure class="d-flex">
                                    {% if media_data['anime']['count_and_percentage']['nodata'] %}
                                    <span class="block-no-data" data-toggle="tooltip" title="No data">
                                        <span id="100%" class="value"></span>
                                    </span>
                                    {% else %}
                                    <span class="block" data-toggle="tooltip" title="Watching">
                                        <span id="{{ media_data['anime']['count_and_percentage']['Watching']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Completed">
                                        <span id="{{ media_data['anime']['count_and_percentage']['Completed']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="On Hold">
                                        <span id="{{ media_data['anime']['count_and_percentage']['On Hold']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Random">
                                        <span id="{{ media_data['anime']['count_and_percentage']['Random']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Dropped">
                                        <span id="{{ media_data['anime']['count_and_percentage']['Dropped']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Plan to Watch">
                                        <span id="{{ media_data['anime']['count_and_percentage']['Plan to Watch']['percent'] }}%" class="value"></span>
                                    </span>
                                    {% endif %}
                                </figure>
                                <div class="m-t-10">
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Watching:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['anime']['count_and_percentage']['Watching']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Dropped:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['anime']['count_and_percentage']['Dropped']['count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Completed:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['anime']['count_and_percentage']['Completed']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Plan to Watch:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['anime']['count_and_percentage']['Plan to Watch']['count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">On Hold:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['anime']['count_and_percentage']['On Hold']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text" data-toggle="tooltip" title="Without plan to watch">Total Anime:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text" data-toggle="tooltip" title="Without plan to watch">
                                                {{ media_data['anime']['count_and_percentage']['total'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Random:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['anime']['count_and_percentage']['Random']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Episodes:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['anime']['nb_ep_watched'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <!------------------------ Movies statistics --------------------------->
                        <div class="stats-size">
                            <h5 class="text-center mb-0">
                                <a class="text-light" href="{{ url_for('main.mymedialist', media_list='movieslist', user_name=user_name) }}">
                                    <b>Movies </b><i class="fas fa-xs fa-external-link-square-alt"></i>
                                </a>
                            </h5>
                            <div id="MOVIES">
                                <div class="m-b-16">
                                    <span class="stat-text"><b>Days:</b> {{ media_data['movies']['time_spent_day'] }}</span>
                                    <span class="stat-text float-right"><b>Hours:</b> {{ media_data['movies']['time_spent_hour'] }}</span>
                                </div>
                                <figure class="d-flex">
                                    {% if media_data['movies']['count_and_percentage']['nodata'] %}
                                    <span class="block-no-data" data-toggle="tooltip" title="No data">
                                        <span id="100%" class="value"></span>
                                    </span>
                                    {% else %}
                                    <span class="block" data-toggle="tooltip" title="Completed">
                                        <span id="{{ media_data['movies']['count_and_percentage']['Completed']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Completed Animation">
                                        <span id="{{ media_data['movies']['count_and_percentage']['Completed Animation']['percent'] }}%" class="value"></span>
                                    </span>
                                    <span class="block" data-toggle="tooltip" title="Plan to Watch">
                                        <span id="{{ media_data['movies']['count_and_percentage']['Plan to Watch']['percent'] }}%" class="value"></span>
                                    </span>
                                    {% endif %}
                                </figure>
                                <div class="m-t-10">
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Completed:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['movies']['count_and_percentage']['Completed']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Plan to Watch:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text">{{ media_data['movies']['count_and_percentage']['Plan to Watch']['count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat-text">Completed Anime:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat-text">{{ media_data['movies']['count_and_percentage']['Completed Animation']['count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat-text" data-toggle="tooltip" title="Without plan to watch">Total movies:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat-text" data-toggle="tooltip" title="Without plan to watch">
                                                {{ media_data['movies']['count_and_percentage']['total'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="vertical_line"></div>
            <div class="col-xl-3 col-lg col-md-12">
                <ul class="p-l-0 p-r-0">
                    <li class="m-b-20">
                        <h4><i class="fas fa-chart-pie"></i>&nbsp&nbspBadges</h4><hr>
                        <div class="stats-size m-b-20">
                            <div class="text-left m-b-10">
                                Badges page:
                                <a class="btn btn-sm btn-dark" style='border: solid grey 1px;' href="{{ url_for('badges', user_name=user_name) }}">Badges</a>
                            </div>
                        </div>
                    </li>
                    <li class="m-b-20">
                        <h4><i class="fas fa-sm fa-info-circle"></i>&nbsp&nbspInformation</h4>
                        <hr>
                        <ul class="text-left" style="list-style-type: disc; font-size: 13pt;">
                            <li class="m-b-10">
                                <div class="row">
                                    <div  class="col-9">
                                        Profile views:
                                    </div>
                                    <div  class="col-2">
                                        {{ user_data['view_count']["profile"] }}
                                    </div>
                                </div>
                            </li>
                            <li class="m-b-10">
                                <div class="row">
                                    <div  class="col-9">
                                        SeriesList views:
                                    </div>
                                    <div  class="col-2">
                                        {{ user_data['view_count']["series"] }}
                                    </div>
                                </div>
                            </li>
                            <li class="m-b-10">
                                <div class="row">
                                    <div  class="col-9">
                                        AnimeList views:
                                    </div>
                                    <div  class="col-2">
                                        {{ user_data['view_count']["anime"] }}
                                    </div>
                                </div>
                            </li>
                            <li class="m-b-10">
                                <div class="row">
                                    <div  class="col-9">
                                        MoviesList views:
                                    </div>
                                    <div  class="col-2">
                                        {{ user_data['view_count']["movies"] }}
                                    </div>
                                </div>
                            </li>
                            {% if user_data['id'] == current_user.get_id() %}
                            <li class="m-b-10">
                                <a class="text-light" href="{{ url_for('level_grade_data') }}" target="_blank">
                                    Grades and levels data
                                    <i class="text-light fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </li>
                            <li class="m-b-10">
                                <a class="text-light" href="{{ url_for('knowledge_grade_data') }}" target="_blank">
                                    Knowledge levels data
                                    <i class="text-light fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </li>
                            {% endif %}
                        </ul>
                    </li>
                    <li class="m-b-20">
                        <div>
                            <h4>
                                <i class="fas fa-highlighter text-light"></i>
                                {% if user_data['id'] == current_user.get_id() %}
                                &nbsp&nbspMy Last Updates
                                {% else %}
                                &nbsp&nbspUser's Last Updates
                                {% endif %}
                            </h4>
                        </div>
                        <hr>
                        {% for update in user_data['media_update'] %}
                            {% if update['category'] == 'anime' %}
                            <div class="p-2 m-b-5" style="border-bottom: solid 1px #945141;">
                                <div style="font-size: 12pt;">
                                    <i style="color: #945141;" class="fas fa-torii-gate m-r-14" data-toggle="tooltip" title="Anime"></i>
                            {% elif update['category'] == 'series' %}
                            <div class="p-2 m-b-5" style="border-bottom: solid 1px #216e7d;">
                                <div style="font-size: 12pt;">
                                    <i style="color: #216e7d;" class="fas fa-tv m-r-10" data-toggle="tooltip" title="Series"></i>
                            {% elif update['category'] == 'movie' %}
                            <div class="p-2 m-b-5" style="border-bottom: solid 1px #8c7821;">
                                <div style="font-size: 12pt;">
                                    <i style="color: #8c7821;" class="far fa-star m-r-12" data-toggle="tooltip" title="Movie"></i>
                            {% endif %}
                                    <span data-toggle="tooltip" title="{{ update['media_name'] }}">{{ update['media_name'] }}</span>
                                </div>

                                <div class="m-l-35" style="font-size: 11pt;">
                                    {% if update['update']|length == 2 %}
                                        {{ update['update'][0] }}
                                        <i class="fas fa-long-arrow-alt-right m-l-4 m-r-4"></i>
                                        {{ update['update'][1] }}
                                    {% else %}
                                         {{ update['update'][0] }}
                                    {% endif %}
                                </div>

                                <span class="m-l-35" style="color: #b3b3b3; font-size: 10pt;">
                                    <script>
                                        var tz = new Intl.DateTimeFormat().resolvedOptions().timeZone;
                                        var localdate = new Date("{{ update['date'] }}").toLocaleString("en-GB", {timeZone: tz});
                                        var d = new Date("{{ update['date'] }}")
                                        var month = new Array();
                                        month[0] = "Jan";
                                        month[1] = "Feb";
                                        month[2] = "Mar";
                                        month[3] = "Apr";
                                        month[4] = "May";
                                        month[5] = "Jun";
                                        month[6] = "Jul";
                                        month[7] = "Aug";
                                        month[8] = "Sep";
                                        month[9] = "Oct";
                                        month[10] = "Nov";
                                        month[11] = "Dec";
                                        var date_month = month[d.getMonth()];
                                        var date_day = localdate.slice(0,2);
                                        var date_time = localdate.slice(11,17)
                                        document.write(date_day + " " + date_month + " at " + date_time)
                                    </script>
                                </span>
                            </div>
                        {% endfor %}
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div id="follows-tab" class="tab-pane fade {% if message_tab == 'follows' %} show active {% endif %}">
        <div class="row m-t-30 mobile-follow-add">
            <div class="col">
                {% if user_data['id'] == current_user.get_id() %}
                <form method="POST" action="" enctype="multipart/form-data">
                    {{ follow_form.hidden_tag() }}
                    <div class="d-flex flex-wrap">
                        {{ follow_form.follow_to_add(style="max-width: 180px;", class='form-control', placeholder='Username to add') }}
                        {% for error in follow_form.follow_to_add.errors %}
                        <div class="m-l-10 mt-auto mb-auto" style="color: red;">{{ error }}</div>
                        {% endfor %}
                        {{ follow_form.submit_follow(class="btn btn-outline-info m-t-0 m-l-20 p-2") }}
                    </div>
                </form>
                {% endif %}
            </div>
        </div>
        <div class="d-flex flex-wrap m-t-30 follow_wrapper">
            {% for key in follows_data %}
            <div class="card border-0 m-l-10 m-r-10 m-t-60 m-b-40 follow-card">
                <div class="card-img-top">
                    <div class="row">
                        <div class="col-4">
                            <a href="{{ key }}">
                                <img class="follow-picture" src="{{ follows_data[key]['picture'] }}">
                            </a>
                        </div>
                        <div class="col m-l-20 m-t-15">
                            <h3>{{ key }}</h3>
                        </div>
                    </div>
                </div>
                <div class="card-body follow-card-body p-2 p-b-10 p-t-0 m-t-1">
                    {% for update in follows_data[key]['update'] %}
                    <div>
                        <div class="giveMeEllipsis" style="float: left;">
                            {% if update["category"] == "anime" %}
                            <i style="color: #945141;" class="fas fa-torii-gate m-r-14" data-toggle="tooltip" title="Anime"></i>
                            {% elif update["category"] == "series" %}
                            <i style="color: #216e7d;" class="fas fa-tv m-r-10" data-toggle="tooltip" title="Series"></i>
                            {% else %}
                            <i style="color: #8c7821;" class="far fa-star m-r-12" data-toggle="tooltip" title="Movie"></i>
                            {% endif %}
                            <span data-toggle="tooltip" title="{{ update['media_name'] }}">{{ update["media_name"] }}</span>
                        </div>
                        <div style="float: right;">
                            <i class="follow-date">
                                <script>
                                    var tz = new Intl.DateTimeFormat().resolvedOptions().timeZone;
                                    var localdate = new Date("{{ update['date'] }}").toLocaleString("en-GB", {timeZone: tz});
                                    var d = new Date("{{ update['date'] }}")
                                    var month = new Array();
                                    month[0] = "Jan";
                                    month[1] = "Feb";
                                    month[2] = "Mar";
                                    month[3] = "Apr";
                                    month[4] = "May";
                                    month[5] = "Jun";
                                    month[6] = "Jul";
                                    month[7] = "Aug";
                                    month[8] = "Sep";
                                    month[9] = "Oct";
                                    month[10] = "Nov";
                                    month[11] = "Dec";
                                    var date_month = month[d.getMonth()];
                                    var date_day = localdate.slice(0,2);
                                    var date_time = localdate.slice(11,17)
                                    document.write(date_day + " " + date_month + ", " + date_time)
                                </script>
                            </i>
                        </div>
                    </div>
                        <div style="clear: both;"></div>
                        {% if update["update"]|length == 2 %}
                        <div class="m-l-35" style="font-size: 11pt;">
                            {{ update["update"][0] }}
                            <i class="fas fa-long-arrow-alt-right m-l-4 m-r-4"></i>
                            {{ update["update"][1] }}
                        </div>
                        {% else %}
                        <div class="m-l-35" style="font-size: 11pt;">
                            {{ update["update"][0] }}
                        </div>
                        {% endif %}
                        {% if not loop.last %}
                            {% if update["category"] == "anime" %}
                            <hr style="border-color: #945141;" class="p-0 m-t-4 m-b-4">
                            {% elif update["category"] == "series" %}
                            <hr style="border-color: #216e7d;" class="p-0 m-t-4 m-b-4">
                            {% else %}
                            <hr style="border-color: #8c7821;" class="p-0 m-t-4 m-b-4">
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<div class="modal_loading"></div>
{% endblock content %}


{% block script %}
<script type="text/javascript" src="{{ url_for('static', filename='js/account.js') }}" ></script>
{% endblock script %}
