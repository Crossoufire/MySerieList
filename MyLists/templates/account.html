{% extends "layout.html" %}


{% block css %}
<!-------------- Main CSS ------------->
<style>
.form_account {
    max-width: 800px;
    margin-top: 40px;
}

hr {
    border-top: 1px solid rgba(255, 255, 255, 0.9);
}

.grey_hr {
    border-top: 1px solid grey;
}

.modal-content {
    background: #131418;
}

.table tr {
    text-align: center;
    vertical-align: middle;
}

.table td {
    text-align: center;
    vertical-align: middle;
}

.form-control {
    background: transparent;
    border-radius: 0px;
    border-top: 0px;
    border-left: 0px;
    border-right: 0px;
    color: #fff;
}

.form-control:focus {
    background: transparent;
    border-radius: 0px;
    border-top: 0px;
    border-left: 0px;
    border-right: 0px;
    box-shadow: 0 0 0 0rem;
    color: #fff;
}

.arrow_div {
    height: 21px;
    width: 21px;
}

.block:nth-of-type(2) {
	background-color: #45B29D;
}
.block:nth-of-type(3) {
	background-color: #EFC94C;
}
.block:nth-of-type(4) {
	background-color: #E27A3F;
}
.block:nth-of-type(5) {
	background-color: #DF5A49;
}
.block:nth-of-type(6) {
	background-color: #962D3E;
}
.block:hover {
	opacity: 0.75;
}
.col-centered{
    float: none;
    margin: 0 auto;
}

/* On screens that are 599px or more */
@media screen and (min-width: 599px) {
    .account-img {
        height: 150px;
        width: 150px;
        margin-bottom: 15px;
        border-style: solid;
        border-width: 1px;
    }

    .border_account {
        border-style: solid;
        border-width: 1px;
        border-color: grey;
        border-radius: 3px;
        padding-top: 30px;
        padding-bottom: 20px;
        padding-left: 50px;
        padding-right: 50px;
        margin-bottom: 20px;
    }

    .stat_text {
        font-size: 12pt;
    }

    .mini {
        min-width: 105px;
    }

    .block {
	    height: 30px;
	    color: #fff;
	    float: left;
	    background-color: #334D5C;
    }
}

/* On screens that are 599px or less */
@media screen and (max-width: 599px) {
    .account-img {
        height: 100px;
        width: 100px;
        margin-bottom: 15px;
        border-style: solid;
        border-width: 1px;
    }

    .btn.btn-sm {
        padding: .5rem 1rem;
        font-size: .4rem;
    }

    .border_account {
        border-style: solid;
        border-width: 1px;
        border-color: grey;
        border-radius: 3px;
        padding-top: 30px;
        padding-bottom: 20px;
        padding-left: 20px;
        padding-right: 20px;
        margin-bottom: 20px;
    }

    .username {
        font-size: 1.5rem;
    }

    .stat_text {
        font-size: 10pt;
    }

    .mini {
        min-width: 100px;
    }

    .block {
	    height: 25px;
	    color: #fff;
	    float: left;
	    background-color: #334D5C;
    }

    .position {
        text-align: right;
    }
}
</style>
<!---- level + badge + total level ---->
<style>
.account-bar-wrapper {
    width: 350px;
}

.account-bar {
    height: 100%;
    margin: 0px auto;
}

.account-bar-name {
    font-size: 12pt;
    margin: 0px 0px 0px 5px;
    display: inline-block;
    vertical-align: bottom;
}

.account-bar-level {
    font-size: 12pt;
    margin: 0px 0px 0px;
    display: inline-block;
}

#series_level {
    margin-left: 20px;
}

#anime_level {
    margin-left: 10px;
}

#book_level {
    margin-left: 20px;
}

.account-bar-next-level {
    display: inline-block;
    font-size: 12pt;
}

.xp-bar {
    height: 10px;
    width: 250px;
    background: #035;
    margin: 0px 0px 0px 5px;
    display: inline-block;
    vertical-align: middle;
}

#xp-bar-fill-series {
    height: 100%;
    width: 0.1%;
    background: #4d0000;
    font-size: 12px;
    line-height: 10px;
    text-align: right;
}

#xp-bar-fill-anime {
    height: 100%;
    width: 0.1%;
    background: #0068b3;
    font-size: 12px;
    line-height: 10px;
    text-align: right;
}

#xp-bar-fill-book {
    height: 100%;
    width: 0.1%;
    background: #004d00;
    font-size: 12px;
    line-height: 10px;
    text-align: right;
}

.xp-increase-fx {
    position: relative;
    display: none;
    height: 100%;
}

.xp-increase-glow1 {
    position: absolute;
    margin: 0px 0px 0px -2px;
    left: 0px;
    top: 0px;
    background: #fff;
    width: 5px;
    height: 100%;
    border-radius: 0px;
    -webkit-filter: blur(2px);
}

.xp-increase-glow2 {
    position: absolute;
    margin: -5px 0px 0px -2px;
    left: 0px;
    top: 0px;
    background: #aaf;
    width: 5px;
    height: 200%;
    border-radius: 0px;
    -webkit-filter: blur(10px);
}

.xp-increase-glow3 {
    position: absolute;
    margin: 0px 0px 0px -5px;
    left: 0px;
    top: 0px;
    background: #fff;
    width: 10px;
    height: 100%;
    border-radius: 5px;
    -webkit-filter: blur(5px);
}

.total_score {
    border-radius: 50%;
    border: solid red;
    color: black;
    display: inline-block;
    font-weight: bold;
    line-height: 2.5em;
    padding-right: 2px;
    text-align: center;
    width: 2.8em;
}
</style>
<!-------- Friends CSS --------->
<style>
.btn_right {
    position: absolute;
    top: 5px;
    right: 5px;
    opacity: 0;
}

.btn_right:hover {
    opacity: 1;
}

.hover:hover~.btn_right {
    opacity: 0.7;
}
</style>
{% endblock css %}


{% block fixed %}
<div class="d-flex flex-wrap">
    <div class="ml-auto">
        <a id="collapse_all" class="fas fa-eye-slash text-light m-r-5" onclick="hide_all_cat()"></a>
        <a id="show_cat_all" class="d-none" onclick="show_all_cat()"></a>
        <a id="collapse_show" class="m-r-5 text-light" onclick="hide_all_cat()">Collapse all</a>
    </div>
</div>
{% endblock fixed %}


{% block content %}
<div class="container form_account p-0">
    {% if user_id == current_user.get_id() %}
    <!---------------------------------------- Add friend modal --------------------------------------->
    <div class="modal fade" id="addFriendModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content" style="border-style: solid; border-width: 1px; border-color: white; max-width: 300px; margin-left: auto; margin-right: auto;">
                <form method="POST" action="">
                    {{ form.hidden_tag() }}
                    <h5 class="border-bottom p-t-20 p-b-15 text-center"><b>Add a Friend</b></h5>
                    <div class="form-group m-l-40 m-r-40 m-t-15">
                        {% if form.friend_to_add.errors %}
                        {{ form.friend_to_add(class="form-control form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for error in form.friend_to_add.errors %}
                            <span>{{ error }}</span> {% endfor %}
                        </div>
                        {% else %}
                        {{ form.friend_to_add(class="form-control", placeholder="Username", onfocus="this.value=''") }}
                        {% endif %}
                    </div>
                    <div class="form-group m-l-20 m-r-20 text-center">
                        {{ form.submit(class="btn btn-sm btn-outline-info") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% endif %}

    <div class="border_account">
        <!------------------------ Account picture/Username/account settings -------------------------->
        <div class="d-flex flex-wrap-reverse">
            <div class="p-r-10 bd-highlight">
                <img class="rounded border-light account-img" src="{{ data['profile_picture'] }}">
            </div>
            <div class="bd-highlight">
                {% if user_id == current_user.get_id() %}
                <h2 class="mt-0 account-heading username">{{ data['username'] }}</h2>
                {% else %}
                <h2 class="mt-0 account-heading username">{{ data['username'] }}'s profile</h2>
                {% endif %}
                <span style="font-size: 14pt;">Knowledge level:&nbsp&nbsp</span>
                <img height='64' width='64' data-toggle="tooltip" title="{{ data['knowledge_title'] }}" src="/static/img/knowledge_ranks/{{ data['knowledge_icon'] }}.png"/>
            </div>
            <div class="ml-auto bd-highlight">
                {% if user_id == current_user.get_id() %}
                <a class="fas fa-2x fa-cog text-light" data-toggle="tooltip" title="Settings" href="{{ url_for('account_settings') }}"></a>
                {% endif %}
            </div>
        </div>

        <!------------------------------- Levels/grades/informations data ----------------------------->
        <div class="row m-t-10">
            <div class="col">
                <div class="d-flex">
                    <div class='account-bar-wrapper'>
                        <div class='account-bar'>
                            <img class="float-left m-t-5" height='44' width='44' data-toggle="tooltip" title="{{ data['series_title'] }}" src="/static/img/levels_ranks/{{ data['series_icon'] }}.ico"/>
                            <span class='account-bar-name'>Series</span>
                            <div id="series_level" class='account-bar-level'>Level {{ data['series_level'] }}</div>
                            <div class='xp-bar' data-toggle="tooltip" title="{{ data['series_percent'] }}%">
                                <div id='xp-bar-fill-series'>
                                    <div class='xp-increase-fx'><div class='xp-increase-fx-flicker'><div class='xp-increase-glow1'></div><div class='xp-increase-glow2'></div><div class='xp-increase-glow3'></div></div><div class='xp-increase-glow2'></div></div>
                                </div>
                            </div>
                            <div class='account-bar-next-level'>&nbsp{{ data['series_level'] | int + 1 }}</div>
                        </div>
                    </div>
                </div>
                <div class="d-flex">
                    <div class='account-bar-wrapper'>
                        <div class='account-bar'>
                            <img class="float-left m-t-5" height='44' width='44' data-toggle="tooltip" title="{{ data['anime_title'] }}" src="/static/img/levels_ranks/{{ data['anime_icon'] }}.ico"/>
                            <div class='account-bar-name'>Anime</div>
                            <div id="anime_level" class='account-bar-level'>Level {{ data['anime_level'] }}</div>
                            <div class='xp-bar' data-toggle="tooltip" title="{{ data['anime_percent'] }}%">
                                <div id='xp-bar-fill-anime'>
                                    <div class='xp-increase-fx'><div class='xp-increase-fx-flicker'><div class='xp-increase-glow1'></div><div class='xp-increase-glow2'></div><div class='xp-increase-glow3'></div></div><div class='xp-increase-glow2'></div></div>
                                </div>
                            </div>
                            <div class='account-bar-next-level'>&nbsp{{ data['anime_level'] | int + 1 }}</div>
                        </div>
                    </div>
                </div>
                <div class="d-flex">
                    <div class='account-bar-wrapper'>
                        <div class='account-bar'>
                            <img class="float-left m-t-5" height='44' width='44' data-toggle="tooltip" title="{{ data['book_title'] }}" src="/static/img/levels_ranks/{{ data['book_icon'] }}.ico"/>
                            <div class='account-bar-name'>Books</div>
                            <div id="book_level" class='account-bar-level'>Level {{ data['book_level'] }}</div>
                            <div class='xp-bar' data-toggle="tooltip" title="{{ data['book_title'] }}%">
                                <div id='xp-bar-fill-book'>
                                    <div class='xp-increase-fx'><div class='xp-increase-fx-flicker'><div class='xp-increase-glow1'></div><div class='xp-increase-glow2'></div><div class='xp-increase-glow3'></div></div><div class='xp-increase-glow2'></div></div>
                                </div>
                            </div>
                            <div class='account-bar-next-level'>&nbsp{{ data['book_level'] | int + 1 }}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col">
                <table style="line-height: 1;" class="table table-sm text-light">
                    <thead>
                    <tr>
                        <th class="text-center" style="font-size: 12pt;" colspan="2">Data Informations</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td class="text-left">All anime achievements</td>
                        <td class="text-center">
                            <a class="text-light fas fa-external-link-square-alt" href="{{ url_for('anime_achievements') }}" target="_blank"></a>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-left">Grades and levels data</td>
                        <td class="text-center">
                            <a class="text-light fas fa-external-link-square-alt" href="{{ url_for('level_grade_data') }}" target="_blank"></a>
                        </td>
                    </tr>
                    <tr>
                        <td class="text-left">Knowledge levels data</td>
                        <td class="text-center">
                            <a class="text-light fas fa-external-link-square-alt" href="{{ url_for('knowledge_grade_data') }}" target="_blank"></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!----------------------------- Lists when visiting other accounts ---------------------------->
        {% if user_id != current_user.get_id() %}
        <hr class="mt-2 mb-3">
            <div class="row text-center">
                <div class="col">
                    <a class="btn btn-primary" href="/serieslist/{{ data['username'] }}">SeriesList</a>
                </div>
                <div class="col">
                    <a class="btn btn-primary" href="/animeslist/{{ data['username'] }}">AnimesList</a>
                </div>
                <div class="col">
                    <a class="btn btn-primary" href="/bookslist/{{ data['username'] }}">BooksList</a>
                </div>
                <div class="col">
                    <a class="btn btn-warning" href="/achievements/{{ data['username'] }}">Achievements</a>
                </div>
            </div>
        {% endif %}

        <!------------------------------------------ Friends ------------------------------------------>
        <h3 class="font-weight-light text-center mt-4 mb-0">
            <div class="arrow_div float-left">
                {% if user_id == current_user.get_id() %}
                <a class="fas fa-xs fa-user-plus" data-toggle="modal" data-target="#addFriendModal"></a>
                {% endif %}
            </div>
            Friends
            <div class="arrow_div float-right">
                <a class="collapse_all fas fa-xs fa-chevron-down" id="FRIENDS_arrow" onclick="hide('collapse_FRIENDS', 'FRIENDS_arrow')"></a>
            </div>
        </h3>
        <hr class="mt-2 mb-3">
        <div id="collapse_FRIENDS" class="container-stats">
            <div class="d-flex flex-wrap" style="margin-right: 0px; margin-left: 0px;">
                    {% for friend in data['friends'] %}
                    {% if friend['status'] == "pending" %}
                        {% if user_id == current_user.get_id() %}
                        <div id="td_{{ friend['user_id'] }}" class="card bg-transparent m-l-10 m-r-10 m-t-8" style="width: 70px; height: 120.5px;">
                            <div class="view overlay">
                                <img class="card-img-top" width="70" height="70" src="/static/profile_pics/{{ friend['picture'] }}" alt="{{ friend['username'] }}">
                                <a class="hover" href="/account/{{ friend['username'] }}">
                                    <div class="mask flex-center rgba-black-strong"></div>
                                </a>
                                <a class="btn_right fas fa-ban" onclick="delete_friend('{{ friend['user_id'] }}', 'td_{{ friend['user_id'] }}')"></a>
                            </div>
                            <div class="card-body bg-transparent p-0 text-center">
                                <span class="text-light">{{ friend['username'] }}</span><br>
                                <a class="fas fa-user-plus m-t-10 m-r-5" style="color: #005ce6;" data-toggle="tooltip" title="Add friend" onclick="friend_request('{{ friend['user_id'] }}', 'accept')"></a>
                                <a class="fas fa-sm fa-user-times m-t-10" style="color: red;" data-toggle="tooltip" title="Decline" onclick="friend_request('{{ friend['user_id'] }}', 'decline')"></a>
                            </div>
                        </div>
                        {% endif %}
                    {% elif friend['status'] == "request" %}
                        {% if user_id == current_user.get_id() %}
                        <div id="td_{{ friend['user_id'] }}" class="card bg-transparent m-l-10 m-r-10 m-t-8" style="width: 70px; height: 114px;">
                            <div class="view overlay">
                                <img class="card-img-top" width="70" height="70" src="/static/profile_pics/{{ friend['picture'] }}" alt="{{ friend['username'] }}">
                                <a class="hover" href="/account/{{ friend['username'] }}">
                                    <div class="mask flex-center rgba-black-strong"></div>
                                </a>
                                <a class="btn_right fas fa-ban" onclick="delete_friend('{{ friend['user_id'] }}', 'td_{{ friend['user_id'] }}')"></a>
                            </div>
                            <div class="card-body bg-transparent p-0 text-center">
                                <span class="text-light" >{{ friend['username'] }}</span>
                                <span style="font-size: 10pt;">(Pending)</span>
                            </div>
                        </div>
                        {% endif %}
                    {% elif friend['status'] == "declined" %}
                    {% else %}
                        <div id="td_{{ friend['user_id'] }}" class="card bg-transparent m-l-10 m-r-10 m-t-8" style="height: 90px; width: 70px;">
                            <div class="view overlay">
                                <img class="card-img-top" width="70" height="70" src="/static/profile_pics/{{ friend['picture'] }}" alt="{{ friend['username'] }}">
                                <a class="hover" href="/account/{{ friend['username'] }}">
                                    <div class="mask flex-center rgba-black-strong"></div>
                                </a>
                                {% if user_id == current_user.get_id() %}
                                <a class="btn_right fas fa-ban" onclick="delete_friend('{{ friend['user_id'] }}', 'td_{{ friend['user_id'] }}')"></a>
                                {% endif %}
                            </div>
                            <div class="card-body bg-transparent p-0 text-center">
                                <span class="text-light" >{{ friend['username'] }}</span>
                            </div>
                        </div>
                    {% endif %}
                    {% endfor %}
            </div>
        </div>

        <!---------------------------------------- Statistics ----------------------------------------->
        <h3 class="font-weight-light text-center mt-4">
            Series Statistics
            <div class="arrow_div float-right">
                <a class="collapse_all fas fa-xs fa-chevron-down" id="SERIES_arrow" onclick="hide('collapse_SERIES', 'SERIES_arrow')"></a>
            </div>
        </h3>
        <hr class="mt-2 mb-3">
        <div id="collapse_SERIES" class="container-stats">
            <div class="m-b-5">
                <span class="stat_text"><b>Days:</b> {{ data['series']['time_spent_day'] }}</span>
                <span class="stat_text float-right"><b>Hours:</b> {{ data['series']['time_spent_hour'] }}</span>
            </div>
            <div class="m-b-5">
                <span class="stat_text"><b>Mean Score:</b> {{ data['series']['mean_score'] }}</span>
            </div>

            <figure class="d-flex">
                {% if data['series']['element_percentage'] == [0.0, 0.0, 0.0, 0.0, 0.0, 0.0] %}
                <span class="block" title="No data" style="background-color: black; border-width: 1px; border-style: solid; border-color: #717171">
                    <span id="100%" class="value"></span>
                </span>
                {% else %}
                <span class="block" title="Watching">
                    <span id="{{ data['series']['element_percentage'][0] }}%" class="value"></span>
                </span>
                <span class="block" title="Completed">
                    <span id="{{ data['series']['element_percentage'][1] }}%" class="value"></span>
                </span>
                <span class="block" title="On Hold">
                    <span id="{{ data['series']['element_percentage'][2] }}%" class="value"></span>
                </span>
                <span class="block" title="Random">
                    <span id="{{ data['series']['element_percentage'][3] }}%" class="value"></span>
                </span>
                <span class="block" title="Dropped">
                    <span id="{{ data['series']['element_percentage'][4] }}%" class="value"></span>
                </span>
                <span class="block" title="Plan to Watch">
                    <span id="{{ data['series']['element_percentage'][5] }}%" class="value"></span>
                </span>
                {% endif %}
            </figure>

            <div class="m-t-10">
                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Watching:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['series']['watching_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Dropped:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['series']['dropped_count'] }}</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Completed:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['series']['completed_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Plan to Watch:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['series']['plantowatch_count'] }}</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">On Hold:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['series']['onhold_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text"></span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Random:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['series']['random_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Episodes:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['series']['nb_ep_watched'] }}</span>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="font-weight-light text-center mt-4">
            Anime Statistics
            <div class="arrow_div float-right">
                <a class="collapse_all fas fa-xs fa-chevron-down" id="ANIME_arrow" onclick="hide('collapse_ANIME', 'ANIME_arrow')"></a>
            </div>
        </h3>
        <hr class="mt-2 mb-3">
        <div id="collapse_ANIME" class="container-stats">
            <div class="m-b-5">
                <span class="stat_text"><b>Days:</b> {{ data['anime']['time_spent_day'] }}</span>
                <span class="stat_text float-right"><b>Hours:</b> {{ data['anime']['time_spent_hour'] }}</span>
            </div>
            <div class="m-b-5">
                <span class="stat_text"><b>Mean Score:</b> {{ data['anime']['mean_score'] }}</span>
            </div>

            <figure class="d-flex">
                {% if data['anime']['element_percentage'] == [0.0, 0.0, 0.0, 0.0, 0.0, 0.0] %}
                <span class="block" title="No data" style="background-color: black !important; border-width: 1px; border-style: solid; border-color: #717171">
                    <span id="100%" class="value"></span>
                </span>
                {% else %}
                <span class="block" title="Watching">
                    <span id="{{ data['anime']['element_percentage'][0] }}%" class="value"></span>
                </span>
                <span class="block" title="Completed">
                    <span id="{{ data['anime']['element_percentage'][1] }}%" class="value"></span>
                </span>
                <span class="block" title="On Hold">
                    <span id="{{ data['anime']['element_percentage'][2] }}%" class="value"></span>
                </span>
                <span class="block" title="Random">
                    <span id="{{ data['anime']['element_percentage'][3] }}%" class="value"></span>
                </span>
                <span class="block" title="Dropped">
                    <span id="{{ data['anime']['element_percentage'][4] }}%" class="value"></span>
                </span>
                <span class="block" title="Plan to Watch">
                    <span id="{{ data['anime']['element_percentage'][5] }}%" class="value"></span>
                </span>
                {% endif %}
            </figure>

            <div class="m-t-10">
                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Watching:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['anime']['watching_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Dropped:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['anime']['dropped_count'] }}</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Completed:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['anime']['completed_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Plan to Watch:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['anime']['plantowatch_count'] }}</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">On Hold:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['anime']['onhold_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text"></span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text"></span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Random:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['anime']['random_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Episodes:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['anime']['nb_ep_watched'] }}</span>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="font-weight-light text-center mt-4">
            Books Statistics
            <div class="arrow_div float-right">
                <a class="collapse_all fas fa-xs fa-chevron-down" id="BOOK_arrow" onclick="hide('collapse_BOOK', 'BOOK_arrow')"></a>
            </div>
        </h3>
        <hr class="mt-2 mb-3">
        <div id="collapse_BOOK" class="container-stats">
            <div class="m-b-5">
                <span class="stat_text"><b>Days:</b> {{ data['book']['time_spent_day'] }}</span>
                <span class="stat_text float-right"><b>Hours:</b> {{ data['book']['time_spent_hour'] }}</span>
            </div>
            <div class="m-b-5">
                <span class="stat_text"><b>Mean Score:</b> {{ data['book']['mean_score'] }}</span>
            </div>

            <figure class="d-flex">
                {% if data['book']['element_percentage'] == [0.0, 0.0, 0.0, 0.0, 0.0] %}
                <span class="block" title="No data" style="background-color: black !important; border-width: 1px; border-style: solid; border-color: #717171">
                    <span id="100%" class="value"></span>
                </span>
                {% else %}
                <span class="block" title="Reading">
                    <span id="{{ data['book']['element_percentage'][0] }}%" class="value"></span>
                </span>
                <span class="block" title="Completed">
                    <span id="{{ data['book']['element_percentage'][1] }}%" class="value"></span>
                </span>
                <span class="block" title="On Hold">
                    <span id="{{ data['book']['element_percentage'][2] }}%" class="value"></span>
                </span>
                <span class="block" title="Dropped">
                    <span id="{{ data['book']['element_percentage'][3] }}%" class="value"></span>
                </span>
                <span class="block" title="Plan to Read">
                    <span id="{{ data['book']['element_percentage'][4] }}%" class="value"></span>
                </span>
                {% endif %}
            </figure>

            <div class="m-t-10">
                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Reading:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['book']['reading_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Dropped:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['book']['dropped_count'] }}</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">Completed:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['book']['completed_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Plan to Read:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['book']['plantoread_count'] }}</span>
                    </div>
                </div>

                <div class="row">
                    <div class="col mini p-r-0">
                        <span class="stat_text">On Hold:</span>
                    </div>
                    <div class="col p-0 position">
                        <span class="stat_text">{{ data['book']['onhold_count'] }}</span>
                    </div>
                    <div class="col mini p-r-0">
                        <span class="stat_text">Pages read:</span>
                    </div>
                    <div class="col p-l-0 position">
                        <span class="stat_text">{{ data['book']['nb_pages_read'] }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal_loading"></div>
{% endblock content %}


{% block script %}
<!--------- Main Javascript ---------->
<script type="text/javascript">
function hide(category, arrow) {
    var category = document.getElementById(category);
    var arrow = document.getElementById(arrow);

    if (category.className === "container-stats"){
        category.className = "d-none";
        arrow.className = "collapse_all fas fa-xs fa-chevron-right";
    } else {
        category.className = "container-stats";
        arrow.className = "collapse_all fas fa-xs fa-chevron-down";
    }
}


function delete_friend(friend_id, td_id) {
    if (!confirm("Are you sure you want to delete this friend from your list?")){
        return false;
    }
    $("#"+td_id).remove();
    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/delete_friend",
        contentType: "application/json",
        data: JSON.stringify({delete: friend_id}),
        dataType: "json",
        success: function(response) {
            console.log("ok"); }
    });
}


function friend_request(friend_id, value) {
    $.ajax ({
        type: "POST",
        url: "/friend_request",
        contentType: "application/json",
        data: JSON.stringify({response: friend_id, request: value }),
        dataType: "json",
        success: function(response) {
            window.location.replace('/account/{{ current_user.username }}'); }
    });
}
</script>
<!--------- Tooltip Javascript ------------>
<script type="text/javascript">
$('.value').each(function() {
	var text = $(this).attr('id');
    $(this).parent().css('width', text);
});
$('.block').tooltip();
// Tooltips Initialization
$(function () {
$('[data-toggle="tooltip"]').tooltip()
})
</script>
<!--------- Level XP Javascript ----------->
<script type="text/javascript">
$(document).ready(function(){
    $body = $("body");
    $body.addClass("loading");
    $(document).click(function() {
        $body.removeClass("loading");
    });
});

$(document).ready(function(){
    $(".xp-increase-fx-flicker").css("opacity", "1");
    $(".xp-increase-fx-flicker").animate({"opacity":Math.random()}, 100);
    $(".xp-increase-fx").css("display", "inline-block");


    $("#xp-bar-fill-series").css("box-shadow", /*"0px 0px 15px #06f, */ "-5px 0px 10px #fff inset");
    setTimeout(function() {
        $("#xp-bar-fill-series").css("-webkit-transition", "all 2s ease");
        $("#xp-bar-fill-series").css("width", "{{ data['series_percent'] }}%");
    }, 100);
    setTimeout(function(){
        $(".xp-increase-fx").fadeOut(500);
        $("#xp-bar-fill-series").css({"-webkit-transition":"all 0.5s ease","box-shadow":""});
    }, 20*parseFloat({{ data['series_percent'] }}));


    $("#xp-bar-fill-anime").css("box-shadow", /*"0px 0px 15px #06f, */ "-5px 0px 10px #fff inset");
    setTimeout(function() {
        $("#xp-bar-fill-anime").css("-webkit-transition", "all 2s ease");
        $("#xp-bar-fill-anime").css("width", "{{ data['anime_percent'] }}%");
    }, 100);
    setTimeout(function() {
        $(".xp-increase-fx").fadeOut(500);$("#xp-bar-fill-anime").css({"-webkit-transition":"all 0.5s ease","box-shadow":""});
    }, 20*parseFloat({{ data['anime_percent'] }}));


    $("#xp-bar-fill-book").css("box-shadow", /*"0px 0px 15px #06f, */ "-5px 0px 10px #fff inset");
    setTimeout(function() {
        $("#xp-bar-fill-book").css("-webkit-transition", "all 2s ease");
        $("#xp-bar-fill-book").css("width", "{{ data['book_title'] }}%");
    }, 100);
    setTimeout(function() {
        $(".xp-increase-fx").fadeOut(500);$("#xp-bar-fill-book").css({"-webkit-transition":"all 0.5s ease","box-shadow":""});
    }, 20*parseFloat({{ data['book_title'] }}));
});
</script>
<!---- Show/collapse all categories scripts ---->
<script type="text/javascript">
function hide_all_cat() {
    var hide = document.getElementById('collapse_all');
    var show = document.getElementById('show_cat_all');
    $('div[id^="collapse"]').attr('class', 'd-none');
    hide.className = "d-none";
    show.className = "fas fa-eye text-light m-r-5";
    $('#collapse_show').text('Expand All');
    $('#collapse_show').attr('onclick', 'show_all_cat()');
    $('.collapse_all').attr('class', 'collapse_all fas fa-xs fa-chevron-right');
}

function show_all_cat() {
    var show = document.getElementById('show_cat_all');
    var hide = document.getElementById('collapse_all');
    $('div[id^="collapse"]').attr('class', 'container-stats');
    hide.className = "fas fa-eye-slash text-light m-r-5";
    show.className = "d-none";
    $('#collapse_show').text('Collapse All');
    $('#collapse_show').attr('onclick', 'hide_all_cat()');
    $('.collapse_all').attr('class', 'collapse_all fas fa-xs fa-chevron-down');
}
{% if user_id == current_user.get_id() %}
$('#addFriendModal').on('shown.bs.modal', function() {
    $('#friend_to_add').focus();
})
{% endif %}
</script>
{% endblock %}
