{% extends "layout.html" %}


{% block css %}
<link href="{{ url_for('static', filename='css/account.css') }}" rel="stylesheet">
{% endblock css %}


{% block content %}
<div class="header-image">
    <img src="{{ data['profile_picture'] }}"/>
    <div class="knowledge-level text-center text-dark">{{ data['knowledge_level'] }}</div>
    <div class="header-data">
        <h2><b>{{ data['username'] }}</b>
            <img height='50' width='50' data-toggle="tooltip" title="{{ data['knowledge_grade_title'] }}"
             src="{{ url_for('static', filename='img/knowledge_ranks/') }}{{ data['knowledge_grade_id'] }}.png"/>
            {% if user_id != current_user.get_id() %}
                {% if data["isfollowing"] %}
                <button class="btn btn-sm btn-dark follow_button" onclick="unfollow('{{ data['id'] }}')">Unfollow</button>
                {% else %}
                <button class="btn btn-sm btn-primary follow_button" onclick="follow('{{ data['id'] }}')">Follow</button>
                {% endif %}
            {% endif %}
        </h2>
        <p class="p-0 m-0">
            <b>Joined: {{ joined }}</b><br>
            <b>Followers: {{ followers }}</b>
        </p>
    </div>
</div>

<ul class="nav account_tab">
    <li class="nav-item ml-auto">
        <a id="overview" class="nav-link active" data-toggle="tab" href="#overview_tab" style="font-size: 0.9rem;">Overview</a>
    </li>
    <li class="nav-item">
        <a id="follows" class="nav-link" data-toggle="tab" href="#follows_tab" style="font-size: 0.9rem;">Follows</a>
    </li>
    {% if user_id != current_user.get_id() %}
    <li class="nav-item mr-auto">
    {% else %}
    <li class="nav-item">
    {% endif %}
        <a id="achievements" class="nav-link" data-toggle="tab" href="#badges_tab" style="font-size: 0.9rem;">Badges</a>
    </li>

    {% if user_id == current_user.get_id() %}
    <li class="nav-item mr-auto">
        <a id="settings" class="nav-link" data-toggle="tab" href="#settings_tab" style="font-size: 0.9rem;">Settings</a>
    </li>
    {% endif %}
    {#<li class="nav-item">
        <a id="stats" class="nav-link" href="#">Adv stats <i class="fas fa-sm fa-external-link-square-alt" style="font-size: 0.9rem;"></i></a>
    </li>#}
</ul>

<div class="tab-content" id="account_tab_content">

    <div id="overview_tab" class="tab-pane fade show active">
        <div class="row m-t-30">
            <div class="col-xl-3 col-lg col-md-12">
                <ul class="p-l-0">
                    <li class="m-b-20">
                        <h4>
                            <i class="fas fa-user"></i>
                            &nbsp&nbspBiography
                            {% if user_id == current_user.get_id() %}
                            <a class="fas fa-sm fa-pen p-r-10" onclick="changeTab('settings_tab', 'settings')" style="float: right;"></a>
                            {% endif %}
                        </h4>
                        <hr>
                        {% if user_biography %}
                        <p style="word-wrap: break-word;" class="text-justify m-b-0">{{ user_biography }}</p>
                        {% elif user_id == current_user.get_id() %}
                        <p class="text-justify m-b-0" style="color: grey;"><i>No biography yet. Write it now. Click on the pen above to edit.</i></p>
                        {% else %}
                        <p class="text-justify m-b-0" style="color: grey;"><i>No biography.</i></p>
                        {% endif %}
                    </li>
                    <li class="m-b-20">
                        <h4><i class="fas fa-angle-double-up"></i>&nbsp&nbsp Lists Levels</h4>
                        <hr>
                        <div class="d-flex">
                            <div class='account-bar-wrapper'>
                                <div class='account-bar'>
                                    <img class="float-left m-r-10" height='40' width='40' data-toggle="tooltip" title="{{ data['series_grade_title'] }}" src="{{ url_for('static', filename='img/levels_ranks/') }}{{ data['series_grade_id'] }}.png"/>
                                    <span class='account-bar-name'>Series</span>
                                    {% if data['series_level'] < 10 %}
                                    <div id="series_level" class='account-bar-level'>Level 0{{ data['series_level'] }}</div>
                                    {% else %}
                                    <div id="series_level" class='account-bar-level'>Level {{ data['series_level'] }}</div>
                                    {% endif %}
                                    <div class='xp-bar' data-toggle="tooltip" title="{{ data['series_percent'] }}%">
                                        <div id='xp-bar-fill-series'>
                                            <div class='xp-increase-fx'>
                                                <div class='xp-increase-fx-flicker'>
                                                    <div class='xp-increase-glow1'></div>
                                                    <div class='xp-increase-glow2'></div>
                                                    <div class='xp-increase-glow3'></div>
                                                </div>
                                                <div class='xp-increase-glow2'></div>
                                            </div>
                                        </div>
                                    </div>
                                    {% if data['series_level'] | int + 1 < 10 %}
                                    <div class='account-bar-next-level'>&nbsp0{{ data['series_level'] | int + 1 }}</div>
                                    {% else %}
                                    <div class='account-bar-next-level'>&nbsp{{ data['series_level'] | int + 1 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class='account-bar-wrapper'>
                                <div class='account-bar'>
                                    <img class="float-left m-r-10" height='40' width='40' data-toggle="tooltip" title="{{ data['movies_grade_title'] }}" src="{{ url_for('static', filename='img/levels_ranks/') }}{{ data['movies_grade_id'] }}.png"/>
                                    <span class='account-bar-name'>Movies</span>
                                    {% if data['movies_level'] < 10 %}
                                    <div id="movies_level" class='account-bar-level'>Level 0{{ data['movies_level'] }}</div>
                                    {% else %}
                                    <div id="movies_level" class='account-bar-level'>Level {{ data['movies_level'] }}</div>
                                    {% endif %}
                                    <div class='xp-bar' data-toggle="tooltip" title="{{ data['movies_percent'] }}%">
                                        <div id='xp-bar-fill-movies'>
                                            <div class='xp-increase-fx'>
                                                <div class='xp-increase-fx-flicker'>
                                                    <div class='xp-increase-glow1'></div>
                                                    <div class='xp-increase-glow2'></div>
                                                    <div class='xp-increase-glow3'></div>
                                                </div>
                                                <div class='xp-increase-glow2'></div>
                                            </div>
                                        </div>
                                    </div>
                                    {% if data['movies_level'] | int + 1 < 10 %}
                                    <div class='account-bar-next-level'>&nbsp0{{ data['movies_level'] | int + 1 }}</div>
                                    {% else %}
                                    <div class='account-bar-next-level'>&nbsp{{ data['movies_level'] | int + 1 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="d-flex">
                            <div class='account-bar-wrapper'>
                                <div class='account-bar'>
                                    <img class="float-left m-r-10" height='40' width='40' data-toggle="tooltip" title="{{ data['anime_grade_title'] }}" src="{{ url_for('static', filename='img/levels_ranks/') }}{{ data['anime_grade_id'] }}.png"/>
                                    <div class='account-bar-name'>Anime</div>
                                    {% if data['anime_level'] < 10 %}
                                    <div id="anime_level" class='account-bar-level'>Level 0{{ data['anime_level'] }}</div>
                                    {% else %}
                                    <div id="anime_level" class='account-bar-level'>Level {{ data['anime_level'] }}</div>
                                    {% endif %}
                                    <div class='xp-bar' data-toggle="tooltip" title="{{ data['anime_percent'] }}%">
                                        <div id='xp-bar-fill-anime'>
                                            <div class='xp-increase-fx'>
                                                <div class='xp-increase-fx-flicker'>
                                                    <div class='xp-increase-glow1'></div>
                                                    <div class='xp-increase-glow2'></div>
                                                    <div class='xp-increase-glow3'></div>
                                                </div>
                                                <div class='xp-increase-glow2'></div>
                                            </div>
                                        </div>
                                    </div>
                                    {% if data['anime_level'] | int + 1 < 10 %}
                                    <div class='account-bar-next-level'>&nbsp0{{ data['anime_level'] | int + 1 }}</div>
                                    {% else %}
                                    <div class='account-bar-next-level'>&nbsp{{ data['anime_level'] | int + 1 }}</div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="m-b-20">
                        <div>
                            <h4 class="float-left">
                                <i class="fas fa-rss"></i>
                                &nbsp&nbspLast Follows
                            </h4>
                            <h4 class="float-right"><a onclick="changeTab('follows_tab', 'follows')">({{ data["follows"]|length }})</a></h4>
                            <div style="clear: both;"></div>
                        </div>
                        <hr>
                        <div class="row">
                            {% for i in range(0, data["follows"]|length) %}
                                {% if i > 2 %}
                                {% else %}
                                <div class="col-auto">
                                    <a href="/account/{{ data['follows'][i]['username'] }}">
                                        <img style="border-radius: 50%;" height="60" width="60" src="{{ url_for('static', filename='profile_pics/') }}{{ data['follows'][i]['picture'] }}"/><br>
                                        <div style="color: white;" class="text-center" id="{{ data['follows'][i]['user_id'] }}">{{ data['follows'][i]['username'] }}</div>
                                    </a>
                                </div>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </li>
                    {#<li class="m-b-20">
                        <h4><i class="fas fa-newspaper"></i>&nbsp&nbsp Last follows update</h4>
                        <hr>
                        <div class="m-b-10">Psy - series<br>Added Breaking Bad</div>
                        <div class="m-b-10">Psy - series<br>Breaking Bad<br>S01.E02 <i class="fas fa-arrow-right"></i> S01.E04</div>
                        <div>Psy - anime<br>Shingeki no kyojin<br>S02.E04 <i class="fas fa-arrow-right"></i> S02.E08</div>
                    </li>#}
                </ul>
            </div>
            <div class="vertical_line"></div>
            <div class="col-xl col-lg-5 col-md-12">
                <ul class="p-l-0">
                    <li>
                        <h4>
                            <i class="fas fa-chart-pie"></i>
                            &nbsp&nbspStatistics
                        </h4>
                        <hr>
                        <!------------------------ Series statistics --------------------------->
                        <div class="stats-size">
                            <h5>
                                <a class="text-left text-light m-b-10" href="{{ url_for('mymedialist', media_list='serieslist', user_name=user_name) }}">
                                    <b>Series </b><i class="fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </h5>
                            <div id="SERIES" class="m-b-30">
                                <div class="m-b-5">
                                    <span class="stat_text"><b>Days:</b> {{ data['series']['time_spent_day'] }}</span>
                                    <span class="stat_text float-right"><b>Hours:</b> {{ data['series']['time_spent_hour'] }}</span>
                                </div>
                                <div class="m-b-5">
                                    <span class="stat_text"><b>Mean Score:</b> {{ data['series']['mean_score'] }}</span>
                                </div>
                                <figure class="d-flex">
                                    {% if data['series']['element_percentage'] == [0.0, 0.0, 0.0, 0.0, 0.0, 0.0] %}
                                    <span class="block_no_data" title="No data">
                                <span id="100%" class="value"></span>
                            </span>
                                    {% else %}
                                    <span class="block" title="Watching">
                                <span id="{{ data['series']['element_percentage'][0] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Completed">
                                <span id="{{ data['series']['element_percentage'][1] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="On Hold">
                                <span id="{{ data['series']['element_percentage'][2] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Random">
                                <span id="{{ data['series']['element_percentage'][3] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Dropped">
                                <span id="{{ data['series']['element_percentage'][4] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Plan to Watch">
                                <span id="{{ data['series']['element_percentage'][5] }}%" class="value"></span>
                            </span>
                                    {% endif %}
                                </figure>
                                <div class="m-t-10">
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Watching:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['series']['watching_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Dropped:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['series']['dropped_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Completed:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['series']['completed_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Plan to Watch:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['series']['plantowatch_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">On Hold:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['series']['onhold_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text" data-toggle="tooltip" title="Without plan to watch">Total Series:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text" data-toggle="tooltip" title="Without plan to watch">{{ data['series']['total_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Random:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['series']['random_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Episodes:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['series']['nb_ep_watched'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <!------------------------- Anime statistics --------------------------->
                        <div class="stats-size">
                            <h5>
                                <a class="text-left text-light m-b-10" href="{{ url_for('mymedialist', media_list='animelist', user_name=user_name) }}">
                                    <b>Anime </b><i class="fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </h5>
                            <div id="ANIME" class="m-b-30">
                                <div class="m-b-5">
                                    <span class="stat_text"><b>Days:</b> {{ data['anime']['time_spent_day'] }}</span>
                                    <span class="stat_text float-right"><b>Hours:</b> {{ data['anime']['time_spent_hour'] }}</span>
                                </div>
                                <div class="m-b-5">
                                    <span class="stat_text"><b>Mean Score:</b> {{ data['anime']['mean_score'] }}</span>
                                </div>
                                <figure class="d-flex">
                                    {% if data['anime']['element_percentage'] == [0.0, 0.0, 0.0, 0.0, 0.0, 0.0] %}
                                    <span class="block_no_data" title="No data">
                                <span id="100%" class="value"></span>
                            </span>
                                    {% else %}
                                    <span class="block" title="Watching">
                                <span id="{{ data['anime']['element_percentage'][0] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Completed">
                                <span id="{{ data['anime']['element_percentage'][1] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="On Hold">
                                <span id="{{ data['anime']['element_percentage'][2] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Random">
                                <span id="{{ data['anime']['element_percentage'][3] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Dropped">
                                <span id="{{ data['anime']['element_percentage'][4] }}%" class="value"></span>
                            </span>
                                    <span class="block" title="Plan to Watch">
                                <span id="{{ data['anime']['element_percentage'][5] }}%" class="value"></span>
                            </span>
                                    {% endif %}
                                </figure>
                                <div class="m-t-10">
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Watching:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['anime']['watching_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Dropped:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['anime']['dropped_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Completed:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['anime']['completed_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Plan to Watch:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['anime']['plantowatch_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">On Hold:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['anime']['onhold_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text" data-toggle="tooltip" title="Without plan to watch">Total Anime:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text" data-toggle="tooltip" title="Without plan to watch">{{ data['anime']['total_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Random:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['anime']['random_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Episodes:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['anime']['nb_ep_watched'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <!------------------------ Movies statistics --------------------------->
                        <div class="stats-size">
                            <h5>
                                <a class="text-left text-light m-b-10" href="{{ url_for('mymedialist', media_list='movieslist', user_name=user_name) }}">
                                    <b>Movies </b><i class="fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </h5>
                            <div id="MOVIES">
                                <div class="m-b-5">
                                    <span class="stat_text"><b>Days:</b> {{ data['movies']['time_spent_day'] }}</span>
                                    <span class="stat_text float-right"><b>Hours:</b> {{ data['movies']['time_spent_hour'] }}</span>
                                </div>
                                <div class="m-b-5">
                                    <span class="stat_text"><b>Mean Score:</b> {{ data['movies']['mean_score'] }}</span>
                                </div>
                                <figure class="d-flex">
                                    {% if data["movies"]["element_percentage"] == [0.0, 0.0, 0.0] %}
                                    <span class="block_no_data" title="No data">
                                        <span id="100%" class="value"></span>
                                    </span>
                                    {% else %}
                                    <span class="block" title="Completed">
                                        <span id="{{ data['movies']['element_percentage'][0] }}%" class="value"></span>
                                    </span>
                                    <span class="block" title="Completed Animation">
                                        <span id="{{ data['movies']['element_percentage'][1] }}%" class="value"></span>
                                    </span>
                                    <span class="block" title="Plan to Watch">
                                        <span id="{{ data['movies']['element_percentage'][2] }}%" class="value"></span>
                                    </span>
                                    {% endif %}
                                </figure>
                                <div class="m-t-10">
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Completed:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['movies']['completed_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Plan to Watch:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text">{{ data['movies']['plantowatch_count'] }}</span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col mini p-r-0">
                                            <span class="stat_text">Completed Anime:</span>
                                        </div>
                                        <div class="col p-0 position">
                                            <span class="stat_text">{{ data['movies']['completed_animation_count'] }}</span>
                                        </div>
                                        <div class="col mini p-r-0">
                                            <span class="stat_text" data-toggle="tooltip" title="Without plan to watch">Total movies:</span>
                                        </div>
                                        <div class="col p-l-0 position">
                                            <span class="stat_text" data-toggle="tooltip" title="Without plan to watch">{{ data['movies']['total_count'] }}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="vertical_line"></div>
            <div class="col-xl-3 col-lg col-md-12">
                <ul class="p-l-0 p-r-0">
                    <li class="m-b-20">
                        <h4>
                            <i class="fas fa-chart-pie"></i>
                            &nbsp&nbspBadges
                        </h4>
                        <hr>
                        <!------------------------ Series achievements --------------------------->
                        <div class="stats-size m-b-20">
                            <h5 class="text-left m-b-10"><b>Series</b></h5>
                            <div class="row">
                                    <div class="col-auto achiev-name">
                                        Badges
                                    </div>
                                    <div class="col achiev-bar">
                                        <div class="block_achiev series">
                                            <span id="{{ ((series_achiev['unlocked_badges'])/13)*100 }}%" class="value"></span>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        {{ "{:02d}".format(series_achiev['unlocked_badges']) }}/13
                                    </div>
                                </div>
                            <div class="row">
                                    <div class="col-auto achiev-name">
                                        Levels
                                    </div>
                                    <div class="col achiev-bar">
                                        <span class="block_achiev series">
                                            <span id="{{ ((series_achiev['unlocked_levels'])/51)*100 }}%" class="value"></span>
                                            <span id="4%" class="value"></span>
                                        </span>
                                    </div>
                                    <div class="col-auto">
                                        {{ "{:02d}".format(series_achiev['unlocked_levels']) }}/51
                                    </div>
                                </div>
                        </div>
                        <!------------------------ Anime achievements --------------------------->
                        <div class="stats-size m-b-20">
                            <h5 class="text-left m-b-10"><b>Anime</b></h5>
                            <div class="row">
                                    <div class="col-auto achiev-name">
                                        Badges
                                    </div>
                                    <div class="col achiev-bar">
                                        <div class="block_achiev anime">
                                            <span id="{{ ((anime_achiev['unlocked_badges'])/17)*100 }}%" class="value"></span>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        {{ "{:02d}".format(anime_achiev['unlocked_badges']) }}/17
                                    </div>
                                </div>
                            <div class="row">
                                    <div class="col-auto achiev-name">
                                        Levels
                                    </div>
                                    <div class="col achiev-bar">
                                        <span class="block_achiev anime">
                                            <span id="{{ ((anime_achiev['unlocked_levels'])/67)*100 }}%" class="value"></span>
                                        </span>
                                    </div>
                                    <div class="col-auto">
                                        {{ "{:02d}".format(anime_achiev['unlocked_levels']) }}/67
                                    </div>
                                </div>
                        </div>
                        <!------------------------ Movies achievements --------------------------->
                        <div class="stats-size m-b-20">
                            <h5 class="text-left m-b-10"><b>Movies</b></h5>
                            <div class="row">
                                    <div class="col-auto achiev-name">
                                        Badges
                                    </div>
                                    <div class="col achiev-bar">
                                        <div class="block_achiev movies">
                                            <span id="{{ ((movies_achiev['unlocked_badges'])/17)*100 }}%" class="value"></span>
                                        </div>
                                    </div>
                                    <div class="col-auto">
                                        {{ "{:02d}".format(movies_achiev['unlocked_badges']) }}/17
                                    </div>
                                </div>
                            <div class="row">
                                    <div class="col-auto achiev-name">
                                        Levels
                                    </div>
                                    <div class="col achiev-bar">
                                        <span class="block_achiev movies">
                                            <span id="{{ ((movies_achiev['unlocked_levels'])/67)*100 }}%" class="value"></span>
                                        </span>
                                    </div>
                                    <div class="col-auto">
                                        {{ "{:02d}".format(movies_achiev['unlocked_levels']) }}/67
                                    </div>
                                </div>
                        </div>
                    </li>
                    <li>
                        <h4>
                            <i class="fas fa-sm fa-info-circle"></i>
                            &nbsp&nbspInformation
                        </h4>
                        <hr>
                        <ul class="text-left" style="list-style-type: disc; font-size: 13pt;">
                            <li class="m-b-10">
                                <a class="text-light" href="{{ url_for('level_grade_data') }}" target="_blank">
                                    Grades and levels data
                                    <i class="text-light fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </li>
                            <li class="m-b-10">
                                <a class="text-light" href="{{ url_for('knowledge_grade_data') }}" target="_blank">
                                    Knowledge levels data
                                    <i class="text-light fas fa-sm fa-external-link-square-alt"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <div id="follows_tab" class="tab-pane fade">
        <div class="row m-t-30">
            <div class="col">
                {% if user_id == current_user.get_id() %}
                <form method="POST" action="" enctype="multipart/form-data">
                    {{ follow_form.hidden_tag() }}
                    <div class="d-flex flex-wrap">
                        {{ follow_form.follow_to_add(style="max-width: 200px;", class='form-control', placeholder='Username') }}
                        {% for error in follow_form.follow_to_add.errors %}
                            <div class="m-l-10 mt-auto mb-auto" style="color: red;">{{ error }}</div>
                        {% endfor %}
                        {{ follow_form.submit_follow(class="btn btn-outline-info m-t-0 m-l-20 p-r-12 p-l-12") }}
                    </div>
                </form>
                {% endif %}
                <div class="row m-t-30">
                    {% for follow in data["follows"] %}
                    <div class="col-xl-auto col-lg-auto col-sm-auto col m-b-30">
                        <a href="/account/{{ follow['username'] }}">
                            <div class="text-center">
                                <img style="border-radius: 50%;" height="90" width="90" src="{{ url_for('static', filename='profile_pics/') }}{{ follow['picture'] }}"/><br>
                                <div style="color: white;" id="{{ follow['user_id'] }}">{{ follow['username'] }}</div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <div id="badges_tab" class="tab-pane fade">
        <div class="d-flex flex-wrap filters-button-group m-t-30" style="justify-content: center;">
            <button class="btn btn-sm btn-warning text-dark" onclick="changeBadges('anime')">Anime</button>
            <button class="btn btn-sm btn-light text-dark" onclick="changeBadges('series')">Series</button>
            <button class="btn btn-sm btn-light text-dark" onclick="changeBadges('movies')">Movies</button>
        </div>
        <div id="anime_badges" class="row m-t-30" style="display: block;">
            <div class="col">
                <div class="row">
                    {% for i in range(0, anime_achiev['all_badges']|length) %}
                    <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 m-b-40">
                        <h4>{{ anime_achiev['all_badges'][i]['title'] }}</h4>
                        <div class="row">
                            <div class="col-auto">
                                <img width="70" height="70" src="{{ url_for('static', filename='img/media_badges') }}/{{ anime_achiev['all_badges'][i]['image_id'] }}.png"/>
                            </div>
                            <div class="col-auto p-0" style="margin-top: auto; margin-bottom: auto;">
                                {% if anime_achiev['all_badges'][i]['type'] == 'genre' %}
                                    Badge earned when watching<br>{{ anime_achiev['all_badges'][i]['title'] }} genre anime.
                                {% elif anime_achiev['all_badges'][i]['type'] == 'classic' %}
                                    Badge earned when watching<br>anime aired from 1990-2000.
                                {% elif anime_achiev['all_badges'][i]['type'] == 'finished' %}
                                    Badge earned when finishing<br>anime with the status ended.
                                {% elif anime_achiev['all_badges'][i]['type'] == 'time' %}
                                    Badge earned when watching<br>numerous anime.
                                {% elif anime_achiev['all_badges'][i]['type'] == 'long' %}
                                    Badge earned when watching {{ anime_achiev['all_badges'][i]['threshold'] }}<br>anime with 100 or more episodes.
                                {% elif anime_achiev['all_badges'][i]['type'] == 'old' %}
                                    Badge earned when watching {{ anime_achiev['all_badges'][i]['threshold'] }}<br>anime aired before 1980.
                                {% elif anime_achiev['all_badges'][i]['type'] == 'year' %}
                                    Badge earned when watching<br> anime from {{ anime_achiev['all_badges'][i]['threshold'] }} different aired years.
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-auto achiev-name text-center">
                                {{ anime_achiev['all_badges'][i]['level'] }}
                            </div>
                            {% if anime_achiev['all_badges'][i]['type'] == 'genre' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_time'] }} hours">
                            {% elif anime_achiev['all_badges'][i]['type'] == 'classic' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_time'] }} hours">
                            {% elif anime_achiev['all_badges'][i]['type'] == 'finished' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_count'] }} anime">
                            {% elif anime_achiev['all_badges'][i]['type'] == 'time' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_time'] }} days">
                            {% elif anime_achiev['all_badges'][i]['type'] == 'long' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_count'] }} anime">
                            {% elif anime_achiev['all_badges'][i]['type'] == 'old' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_count'] }} anime">
                            {% elif anime_achiev['all_badges'][i]['type'] == 'year' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ anime_achiev['all_badges'][i]['element_count'] }} anime">
                            {% endif %}
                                    <span class="block_achiev">
                                        {% if anime_achiev['all_badges'][i]['element_percentage'] > 100 %}
                                        <span id="100%" class="value"></span>
                                        {% else %}
                                        <span id="{{ anime_achiev['all_badges'][i]['element_percentage'] }}%" class="value"></span>
                                        {% endif %}
                                    </span>
                                </div>
                            <div class="col-auto">
                                {% if anime_achiev['all_badges'][i]['element_percentage'] > 100 %}
                                    {% if anime_achiev['all_badges'][i]['element_time'] %}
                                        {{ anime_achiev['all_badges'][i]['element_time'] }}
                                    {% else %}
                                        {{ anime_achiev['all_badges'][i]['element_count'] }}
                                    {% endif %}
                                {% else %}
                                    {{ anime_achiev['all_badges'][i]['threshold'] }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div id="series_badges" class="row m-t-30" style="display: none;">
            <div class="col">
                <div class="row">
                    {% for i in range(0, series_achiev['all_badges']|length) %}
                    <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 m-b-40">
                        <h4>{{ series_achiev['all_badges'][i]['title'] }}</h4>
                        <div class="row">
                            <div class="col-auto">
                                <img width="70" height="70" src="{{ url_for('static', filename='img/media_badges') }}/{{ series_achiev['all_badges'][i]['image_id'] }}.png"/>
                            </div>
                            <div class="col-auto p-0" style="margin-top: auto; margin-bottom: auto;">
                                {% if series_achiev['all_badges'][i]['type'] == 'genre' %}
                                    Badge earned when watching<br>{{ series_achiev['all_badges'][i]['title'] }} genre series.
                                {% elif series_achiev['all_badges'][i]['type'] == 'classic' %}
                                    Badge earned when watching<br>series aired from 1990-2000.
                                {% elif series_achiev['all_badges'][i]['type'] == 'finished' %}
                                    Badge earned when finishing<br>series with the status ended.
                                {% elif series_achiev['all_badges'][i]['type'] == 'time' %}
                                    Badge earned when watching<br>numerous series.
                                {% elif series_achiev['all_badges'][i]['type'] == 'long' %}
                                    Badge earned when watching {{ series_achiev['all_badges'][i]['threshold'] }}<br>series with 100 or more episodes.
                                {% elif series_achiev['all_badges'][i]['type'] == 'old' %}
                                    Badge earned when watching {{ series_achiev['all_badges'][i]['threshold'] }}<br>series aired before 1980.
                                {% elif series_achiev['all_badges'][i]['type'] == 'year' %}
                                    Badge earned when watching<br> series from {{ series_achiev['all_badges'][i]['threshold'] }} different aired years.
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-auto achiev-name text-center">
                                {{ series_achiev['all_badges'][i]['level'] }}
                            </div>
                            {% if series_achiev['all_badges'][i]['type'] == 'genre' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_time'] }} hours">
                            {% elif series_achiev['all_badges'][i]['type'] == 'classic' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_time'] }} hours">
                            {% elif series_achiev['all_badges'][i]['type'] == 'finished' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_count'] }} series">
                            {% elif series_achiev['all_badges'][i]['type'] == 'time' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_time'] }} days">
                            {% elif series_achiev['all_badges'][i]['type'] == 'long' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_count'] }} series">
                            {% elif series_achiev['all_badges'][i]['type'] == 'old' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_count'] }} series">
                            {% elif series_achiev['all_badges'][i]['type'] == 'year' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ series_achiev['all_badges'][i]['element_count'] }} series">
                            {% endif %}
                                    <span class="block_achiev">
                                        {% if series_achiev['all_badges'][i]['element_percentage'] > 100 %}
                                        <span id="100%" class="value"></span>
                                        {% else %}
                                        <span id="{{ series_achiev['all_badges'][i]['element_percentage'] }}%" class="value"></span>
                                        {% endif %}
                                    </span>
                                </div>
                            <div class="col-auto">
                                {% if series_achiev['all_badges'][i]['element_percentage'] > 100 %}
                                    {% if series_achiev['all_badges'][i]['element_time'] %}
                                        {{ series_achiev['all_badges'][i]['element_time'] }}
                                    {% else %}
                                        {{ series_achiev['all_badges'][i]['element_count'] }}
                                    {% endif %}
                                {% else %}
                                    {{ series_achiev['all_badges'][i]['threshold'] }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div id="movies_badges" class="row m-t-30" style="display: none;">
            <div class="col">
                <div class="row">
                    {% for i in range(0, movies_achiev['all_badges']|length) %}
                    <div class="col-xl-4 col-lg-4 col-md-6 col-sm-12 m-b-40">
                        <h4>{{ movies_achiev['all_badges'][i]['title'] }}</h4>
                        <div class="row">
                            <div class="col-auto">
                                <img width="70" height="70" src="{{ url_for('static', filename='img/media_badges') }}/{{ movies_achiev['all_badges'][i]['image_id'] }}.png"/>
                            </div>
                            <div class="col-auto p-0" style="margin-top: auto; margin-bottom: auto;">
                                {% if movies_achiev['all_badges'][i]['type'] == 'genre' %}
                                    Badge earned when watching<br>{{ movies_achiev['all_badges'][i]['title'] }} genre movies.
                                {% elif movies_achiev['all_badges'][i]['type'] == 'classic' %}
                                    Badge earned when watching<br>movies aired from 1990-2000.
                                {% elif movies_achiev['all_badges'][i]['type'] == 'finished' %}
                                    Badge earned when finishing<br>movies.
                                {% elif movies_achiev['all_badges'][i]['type'] == 'time' %}
                                    Badge earned when watching<br>numerous movies.
                                {% elif movies_achiev['all_badges'][i]['type'] == 'long' %}
                                    Badge earned when watching {{ movies_achiev['all_badges'][i]['threshold'] }}<br>movies 2h30 or more.
                                {% elif movies_achiev['all_badges'][i]['type'] == 'old' %}
                                    Badge earned when watching {{ movies_achiev['all_badges'][i]['threshold'] }}<br>movies aired before 1980.
                                {% elif movies_achiev['all_badges'][i]['type'] == 'year' %}
                                    Badge earned when watching movies<br>from {{ movies_achiev['all_badges'][i]['threshold'] }} different aired years.
                                {% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-auto achiev-name text-center">
                                {{ movies_achiev['all_badges'][i]['level'] }}
                            </div>
                            {% if movies_achiev['all_badges'][i]['type'] == 'genre' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_time'] }} hours">
                            {% elif movies_achiev['all_badges'][i]['type'] == 'classic' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_time'] }} hours">
                            {% elif movies_achiev['all_badges'][i]['type'] == 'finished' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_count'] }} movies">
                            {% elif movies_achiev['all_badges'][i]['type'] == 'time' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_time'] }} days">
                            {% elif movies_achiev['all_badges'][i]['type'] == 'long' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_count'] }} movies">
                            {% elif movies_achiev['all_badges'][i]['type'] == 'old' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_count'] }} movies">
                            {% elif movies_achiev['all_badges'][i]['type'] == 'year' %}
                                <div class="col achiev-bar" data-toggle="tooltip" title="{{ movies_achiev['all_badges'][i]['element_count'] }} movies">
                            {% endif %}
                                    <span class="block_achiev">
                                        {% if movies_achiev['all_badges'][i]['element_percentage'] > 100 %}
                                        <span id="100%" class="value"></span>
                                        {% else %}
                                        <span id="{{ movies_achiev['all_badges'][i]['element_percentage'] }}%" class="value"></span>
                                        {% endif %}
                                    </span>
                                </div>
                            <div class="col-auto">
                                {% if movies_achiev['all_badges'][i]['element_percentage'] > 100 %}
                                    {% if movies_achiev['all_badges'][i]['element_time'] %}
                                        {{ movies_achiev['all_badges'][i]['element_time'] }}
                                    {% else %}
                                        {{ movies_achiev['all_badges'][i]['element_count'] }}
                                    {% endif %}
                                {% else %}
                                    {{ movies_achiev['all_badges'][i]['threshold'] }}
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    {% if user_id == current_user.get_id() %}
    <div id="settings_tab" class="tab-pane fade">
        <div class="row text-center m-t-50">
            <div class="col">
                <h4><i class="fas fa-sliders-h"></i>&nbsp&nbsp General settings</h4>
                <hr>
                <form method="POST" action="" enctype="multipart/form-data">
                    {{ settings_form.hidden_tag() }}
                    <div class="m-t-30">
                        {{ settings_form.biography.label }}<br>
                        {{ settings_form.biography(size=32) }}<br>
                        {% for error in settings_form.biography.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ settings_form.username.label }}<br>
                        {{ settings_form.username(size=28) }}<br>
                        {% for error in settings_form.username.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ settings_form.email.label }}<br>
                        {{ settings_form.email(size=28) }}<br>
                        {% for error in settings_form.email.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ settings_form.homepage.label }}: &nbsp&nbsp&nbsp {{ settings_form.homepage }}<br>
                        {% for error in settings_form.homepage.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ settings_form.isprivate.label }}: &nbsp&nbsp&nbsp {{ settings_form.isprivate() }}<br>
                        {% for error in settings_form.isprivate.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ settings_form.picture.label }}<br>
                        {{ settings_form.picture() }}<br>
                        {% for error in settings_form.picture.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ settings_form.submit_account(class="btn btn-outline-info custom-btn-size p-r-6 p-l-6 m-b-40") }}
                    </div>
                </form>
            </div>
            <div class="vertical_line"></div>
            <div class="col">
                <h4><i class="fas fa-unlock-alt"></i>&nbsp&nbsp Change your password</h4>
                <hr>
                <form method="POST" action="" enctype="multipart/form-data">
                    {{ password_form.hidden_tag() }}
                    <div class="m-t-30">
                        {{ password_form.current_password.label }}<br>
                        {{ password_form.current_password(size=28) }}<br>
                        {% for error in password_form.current_password.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ password_form.new_password.label }}<br>
                        {{ password_form.new_password(size=28) }}<br>
                        {% for error in password_form.new_password.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ password_form.confirm_new_password.label }}<br>
                        {{ password_form.confirm_new_password(size=28) }}<br>
                        {% for error in password_form.confirm_new_password.errors %}
                        <span style="color: red;">[{{ error }}]</span>
                        {% endfor %}
                    </div>
                    <div class="m-t-30">
                        {{ password_form.submit_password(class="btn btn-outline-info custom-btn-size p-r-6 p-l-6") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<div class="modal_loading"></div>
{% endblock content %}


{% block script %}
<script src="{{ url_for('static', filename='js/account.js') }}" ></script>
<!------- Lists levels animations --------->
<script>
$(".xp-increase-fx-flicker").css("opacity", "1");
$(".xp-increase-fx-flicker").animate({"opacity":Math.random()}, 100);
$(".xp-increase-fx").css("display", "inline-block");

$("#xp-bar-fill-series").css("box-shadow", /*"0px 0px 15px #06f, */ "-5px 0px 10px #fff inset");
setTimeout(function() {
    $("#xp-bar-fill-series").css("-webkit-transition", "all 2s ease");
    $("#xp-bar-fill-series").css("width", "{{ data['series_percent'] }}%");
}, 100);
setTimeout(function(){
    $(".xp-increase-fx").fadeOut(500);
    $("#xp-bar-fill-series").css({"-webkit-transition":"all 0.5s ease","box-shadow":""});
}, 2000);

$("#xp-bar-fill-movies").css("box-shadow", /*"0px 0px 15px #06f, */ "-5px 0px 10px #fff inset");
setTimeout(function() {
    $("#xp-bar-fill-movies").css("-webkit-transition", "all 2s ease");
    $("#xp-bar-fill-movies").css("width", "{{ data['movies_percent'] }}%");
}, 100);
setTimeout(function(){
    $(".xp-increase-fx").fadeOut(500);
    $("#xp-bar-fill-movies").css({"-webkit-transition":"all 0.5s ease","box-shadow":""});
}, 2000);

$("#xp-bar-fill-anime").css("box-shadow", /*"0px 0px 15px #06f, */ "-5px 0px 10px #fff inset");
setTimeout(function() {
    $("#xp-bar-fill-anime").css("-webkit-transition", "all 2s ease");
    $("#xp-bar-fill-anime").css("width", "{{ data['anime_percent'] }}%");
}, 100);
setTimeout(function() {
    $(".xp-increase-fx").fadeOut(500);$("#xp-bar-fill-anime").css({"-webkit-transition":"all 0.5s ease","box-shadow":""});
}, 2000);
</script>
{% endblock %}
