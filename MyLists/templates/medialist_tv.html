{% extends 'medialist_base.html' %}


{% block return_icon %}
    {% if media_list == 'serieslist' %}
        <a class="fas fa-lg fa-torii-gate m-r-10 return-icon text-anime" data-toggle="tooltip" title="Animelist"
           href="{{ url_for('main.mymedialist', media_list='animelist', user_name=username) }}"></a>
    {% elif media_list == 'animelist' %}
        <a class="fas fa-lg fa-tv m-r-10 return-icon-tv text-series" data-toggle="tooltip" title="Serieslist"
           href="{{ url_for('main.mymedialist', media_list='serieslist', user_name=username) }}"></a>
    {% endif %}
    <a class="fas fa-lg fa-film m-r-10 return-icon text-movies" data-toggle="tooltip" title="Movieslist"
       href="{{ url_for('main.mymedialist', media_list='movieslist', user_name=username) }}"></a>
{% endblock return_icon %}


{% block data %}
    {{ item.eps_per_season }}-{{ media_list }}-{{ item.id }}
{% endblock data %}


{% block seas_eps_drop %}
    <div class="seas-eps-drop-container" {% if category == 'plan-to-watch'
    or category == 'random' %} style="display: none;"{% endif %}>
        <select id="S_{{ item.id }}" class="seas-eps-drop
         {% if user_id != current_user.get_id() %} disabled{% endif %}"
                onchange="updateSeason('{{ item.id }}', this)">
            {% for i in range(item.eps_per_season|length) %}
                <option class="seas-eps-drop-options" {% if i + 1 == item.current_season %}
                        selected="selected"{% endif %}>
                    {{ "S{:02}".format(i + 1) }}
                </option>
            {% endfor %}
        </select>

        <span style="border-right: 2px solid gray;"></span>

        <select id="E_{{ item.id }}" class="text-light text-center p-0 seas-eps-drop
         {% if user_id != current_user.get_id() %} disabled{% endif %}"
                onchange="updateEpisode('{{ item.id }}', this, '{{ media_list }}')">
            {% if category == 'plan-to-watch' or category == 'random' %}
                {% for i in range(0, item.eps_per_season[item.current_season - 1]) %}
                    <option class="seas-eps-drop-options" {% if i + 1 == 1 %} selected="selected" {% endif %}>
                        {{ "E{:02}".format(i + 1) }}
                    </option>
                {% endfor %}
            {% else %}
                {% for i in range(item.eps_per_season[item.current_season - 1]) %}
                    <option class="seas-eps-drop-options"
                    {% if i + 1 == item.last_episode_watched %} selected="selected" {% endif %}>
                        {{ "E{:02}".format(i + 1) }}
                    </option>
                {% endfor %}
            {% endif %}
        </select>
    </div>
{% endblock seas_eps_drop %}


{% block javascript %}
    <script src="{{ url_for('static', filename='js/medialist_tv.js') }}"></script>
{% endblock javascript %}