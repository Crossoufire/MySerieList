{% extends "layout.html" %}


{% block css %}
<!------------ Jquery Autocomplete ---------->
<link href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" rel="Stylesheet">
<link href="{{ url_for('static', filename='css/mymedialist_table.css') }}" rel="stylesheet">
{% endblock css %}


{% block fixed %}
<div class="d-flex flex-wrap">
    <div class="ml-auto">
        <a id="collapse_container" onclick="hide_all_cat()">
            <span id="collapse_all" class="fas fa-eye-slash text-light m-r-5"></span>
            <span id="show_cat_all" class="d-none"></span>
            <span id="collapse_show" class="text-light">Collapse all</span>
        </a>

        <span class="m-l-5 m-r-5 text-light">||</span>

        <a id="nav_container" onclick="openNav()">
            <span class="fas fa-bars text-light"></span>
            <span class="text-light">Categories</span>
        </a>

        <span class="m-l-5 m-r-5 text-light">||</span>

        <a id="view_container" href="{{ url_for('mymedialist', media_list=media_list, list_view='grid', user_name=target_user_name) }}">
            <span class="fas fa-bars text-light"></span>
            <span class="text-light">Grid view</span>
        </a>
</div>
{% endblock fixed %}


{% block content %}
<div class="d-flex flex-wrap">
    {% if target_user_id == current_user.get_id() %}
        <div class="m-t-20 m-b-10">
        {% if media_list == "animelist" %}
            <input class="form-control text-light add_element" placeholder="Add an anime" type="text" id="autocomplete" onfocus="this.value=''"/>
            <input type="hidden" id="element_id" value=""/>
        {% elif media_list == "serieslist" %}
            <input class="form-control text-light add_element" placeholder="Add a Series" type="text" id="autocomplete" onfocus="this.value=''"/>
            <input type="hidden" id="element_id" value=""/>
        {% endif %}
        </div>
        <div class="ml-auto m-t-20 m-b-10">
            <button class="btn btn-sm btn-light text-dark p-2" onclick="refreshAll()"><a class="fas fa-sync m-r-5 text-dark"></a> REFRESH ALL</button>
        </div>
    {% endif %}
</div>


<div id="mySidenav" class="sidenav" style="height: 340px; padding-top: 30px;">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()" style="padding: 0px; margin-left: 135px;">&times;</a>
    <a href="#WATCHING">Watching</a>
    <a href="#COMPLETED">Completed</a>
    <a href="#ON_HOLD">On Hold</a>
    <a href="#RANDOM">Random</a>
    <a href="#DROPPED">Dropped</a>
    <a href="#PLAN_TO_WATCH">Plan to Watch</a>
</div>

{% for category in all_data %}
	{% if loop.index == 1 %}
		<div style="cursor: pointer;" data-toggle="collapse" href="#WATCHING" onclick="turn('WATCHING', 'WATCHING_arrow')">
			<h2 class="font-weight-light text-center mt-5 mb-0 category-title">WATCHING
				<div class="arrow_div float-right">
					<a class="collapse_all fas fa-sm fa-chevron-down" id="WATCHING_arrow"></a>
				</div>
			</h2>
		</div>
		<hr class="mt-2 mb-0">
		<div class="collapse show d-flex flex-wrap table-responsive-sm" id="WATCHING">
			<table class="table table-sm text-light">
				<thead class="text-center">
					<th class="table_number">#</th>
					<th>Name</th>
					<th class="table_season">Season</th>
					<th class="table_episode">Episode</th>
					<th class="table_country">Origin country</th>
					<th class="table_score">Score</th>
					{% if target_user_id == current_user.get_id() %}
					<th class="table_actions">Actions</th>
					{% endif %}
				</thead>
				<tbody id="tbody_WATCHING">
	{% elif loop.index == 2 %}
		<div style="cursor: pointer;" data-toggle="collapse" href="#COMPLETED" onclick="turn('COMPLETED', 'COMPLETED_arrow')">
			<h2 class="font-weight-light text-center mt-5 mb-0 category-title">COMPLETED
				<div class="arrow_div float-right">
					<a class="collapse_all fas fa-sm fa-chevron-down" id="COMPLETED_arrow"></a>
				</div>
			</h2>
		</div>
		<hr class="mt-2 mb-0">
		<div class="collapse show d-flex flex-wrap table-responsive-sm" id="COMPLETED">
			<table class="table table-sm text-light">
				<thead class="text-center">
					<th class="table_number">#</th>
					<th>Name</th>
					<th class="table_season">Season</th>
					<th class="table_episode">Episode</th>
					<th class="table_country">Origin country</th>
					<th class="table_score">Score</th>
					{% if target_user_id == current_user.get_id() %}
					<th class="table_actions">Actions</th>
					{% endif %}
				</thead>
				<tbody id="tbody_COMPLETED">
	{% elif loop.index == 3 %}
		<div style="cursor: pointer;" data-toggle="collapse" href="#ON_HOLD" onclick="turn('ON_HOLD', 'ON_HOLD_arrow')">
			<h2 class="font-weight-light text-center mt-5 mb-0 category-title">ON HOLD
				<div class="arrow_div float-right">
					<a class="collapse_all fas fa-sm fa-chevron-down" id="ON_HOLD_arrow"></a>
				</div>
			</h2>
		</div>
		<hr class="mt-2 mb-0">
		<div class="collapse show d-flex flex-wrap table-responsive-sm" id="ON_HOLD">
			<table class="table table-sm text-light">
				<thead class="text-center">
					<th class="table_number">#</th>
					<th>Name</th>
					<th class="table_season">Season</th>
					<th class="table_episode">Episode</th>
					<th class="table_country">Origin country</th>
					<th class="table_score">Score</th>
					{% if target_user_id == current_user.get_id() %}
					<th class="table_actions">Actions</th>
					{% endif %}
				</thead>
				<tbody id="tbody_ON_HOLD">
	 {% elif loop.index == 4 %}
		<div style="cursor: pointer;" data-toggle="collapse" href="#RANDOM" onclick="turn('RANDOM', 'RANDOM_arrow')">
			<h2 class="font-weight-light text-center mt-5 mb-0 category-title">RANDOM
				<div class="arrow_div float-right">
					<a class="collapse_all fas fa-sm fa-chevron-down" id="RANDOM_arrow"></a>
				</div>
			</h2>
		</div>
		<hr class="mt-2 mb-0">
		<div class="collapse show d-flex flex-wrap table-responsive-sm" id="RANDOM">
			<table class="table table-sm text-light">
				<thead class="text-center">
					<th class="table_number">#</th>
					<th>Name</th>
					<th class="table_season">Season</th>
					<th class="table_episode">Episode</th>
					<th class="table_country">Origin country</th>
					<th class="table_score">Score</th>
					{% if target_user_id == current_user.get_id() %}
					<th class="table_actions">Actions</th>
					{% endif %}
				</thead>
				<tbody id="tbody_RANDOM">
	{% elif loop.index == 5 %}
		<div style="cursor: pointer;" data-toggle="collapse" href="#DROPPED" onclick="turn('DROPPED', 'DROPPED_arrow')">
			<h2 class="font-weight-light text-center mt-5 mb-0 category-title">DROPPED
				<div class="arrow_div float-right">
					<a class="collapse_all fas fa-sm fa-chevron-down" id="DROPPED_arrow"></a>
				</div>
			</h2>
		</div>
		<hr class="mt-2 mb-0">
		<div class="collapse show d-flex flex-wrap table-responsive-sm" id="DROPPED">
			<table class="table table-sm text-light">
				<thead class="text-center">
					<th class="table_number">#</th>
					<th>Name</th>
					<th class="table_season">Season</th>
					<th class="table_episode">Episode</th>
					<th class="table_country">Origin country</th>
					<th class="table_score">Score</th>
					{% if target_user_id == current_user.get_id() %}
					<th class="table_actions">Actions</th>
					{% endif %}
				</thead>
				<tbody id="tbody_DROPPED">
	{% elif loop.index == 6 %}
		<div style="cursor: pointer;" data-toggle="collapse" href="#PLAN_TO_WATCH" onclick="turn('PLAN_TO_WATCH', 'PLAN_TO_WATCH_arrow')">
			<h2 class="font-weight-light text-center mt-5 mb-0 category-title">PLAN TO WATCH
				<div class="arrow_div float-right">
					<a class="collapse_all fas fa-sm fa-chevron-down" id="PLAN_TO_WATCH_arrow"></a>
				</div>
			</h2>
		</div>
		<hr class="mt-2 mb-0">
		<div class="collapse show d-flex flex-wrap table-responsive-sm" id="PLAN_TO_WATCH">
			<table class="table table-sm text-light">
				<thead class="text-center">
					<th class="table_number">#</th>
					<th>Name</th>
					<th class="table_season">Season</th>
					<th class="table_episode">Episode</th>
					<th class="table_country">Origin country</th>
					<th class="table_score">Score</th>
					{% if target_user_id == current_user.get_id() %}
					<th class="table_actions">Actions</th>
					{% endif %}
				</thead>
				<tbody id="tbody_PLAN_TO_WATCH">
	{% endif %}

	{% set outer_loop = loop %}

	{% for data in category %}
		<tr id="tr_{{ data[0].id }}">
			<td class="text-center">
				{{ loop.index }}
			</td>
			<td class="text-left">
				<a data-toggle="modal" data-target="#modal_{{ data[0].id }}">{{ data[0].name }}</a>
			</td>
			<td class="text-center">
				{% if target_user_id == current_user.get_id() %}
					<select id="S_{{ data[0].id }}" class="scrollable-menu text-center form-control p-0 seasons" onchange="updateSeason('{{ data[0].id }}', this, '{{ eps['{}'.format(data[0].id)] }}', 'E_{{ data[0].id }}')">
				{% else %}
					<select id="S_{{ data[0].id }}" class="disabled scrollable-menu text-center form-control p-0 seasons" onchange="updateSeason('{{ data[0].id }}', this, '{{ eps['{}'.format(data[0].id)] }}', 'E_{{ data[0].id }}')">
				{% endif %}
				{% for i in range(eps["{}".format(data[0].id)]|length) %}
					{% if i+1 == data[1].current_season %}
						<option selected="selected">Season {{ i+1 }}</option>
					{% else %}
						<option>Season {{ i+1 }}</option>
					{% endif %}
				{% endfor %}
				</select>
			</td>
			<td class="text-center">
				{% if target_user_id == current_user.get_id() %}
					<select id="E_{{ data[0].id }}" class="scrollable-menu text-center form-control p-0 episodes" onchange="updateEpisode('{{ data[0].id }}', this)">
				{% else %}
					<select id="E_{{ data[0].id }}" class="disabled scrollable-menu text-center form-control p-0 episodes" onchange="updateEpisode('{{ data[0].id }}', this)">
				{% endif %}
				{% for i in range(eps["{}".format(data[0].id)][data[1].current_season-1]) %}
					{% if i+1 == data[1].last_episode_watched %}
						<option selected="selected">Episode {{ i+1 }}</option>
					{% else %}
						<option>Episode {{ i+1 }}</option>
					{% endif %}
				{% endfor %}
				</select>
			</td>
			<td class="text-center">
				{{ data[0].origin_country }}
			</td>
			<td class="text-center">
				{% if target_user_id == current_user.get_id() %}
					<a class="score_size" id="new_{{ data[0].id }}" onclick="edit_score('edit_{{ data[0].id }}', 'new_{{ data[0].id }}')">{{ data[1].score }}</a>
				{% else %}
					<a class="disabled score_size" id="new_{{ data[0].id }}" onclick="edit_score('edit_{{ data[0].id }}', 'new_{{ data[0].id }}')">{{ data[1].score }}</a>
				{% endif %}
				<input id="edit_{{ data[0].id }}" class="d-none" type="text" style="max-width: 30px; max-height: 20px; background-color: black; color: white; border: solid; border-color: black;" onkeydown="add_score('new_{{ data[0].id }}', 'edit_{{ data[0].id }}', '{{ data[0].id }}')">
			</td>
			{% if target_user_id == current_user.get_id() %}
				<td class="text-center">
					<a class="fas fa-bars" data-toggle="modal" data-target="#modal_cat{{ data[0].id }}"></a>
					&nbsp &nbsp
					{% if can_update["{}".format(data[0].id)] %}
						<a class="fas fa-sync" onclick="refresh('{{ data[0].id }}')"></a>
						{% endif %}
					&nbsp &nbsp
					<a class="fas fa-ban" onclick="delete_element('{{ data[0].id }}', 'tr_{{ data[0].id }}')"></a>
				</td>
			{% endif %}
		</tr>

		<!----------- Categories Modal ---------------->
		<div style="max-width: 220px;" class="modal fade left" id="modal_cat{{ data[0].id }}" tabindex="-1" role="dialog" aria-labelledby="cat_mod" aria-hidden="true">
			<div style="max-width: 200px;" class="modal-dialog modal-side modal-top-left modal-sm" role="document">
				<div style="max-width: 200px; background: #131418;" class="modal-content">
					<div style="max-width: 200px;" class="modal-header">
						<h5 class="modal-title">Categories</h5>
						<button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div id="mod_{{ data[0].id }}" class="modal-body">
						{% if outer_loop.index == 1 %}
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Completed', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Completed</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'On Hold', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">On Hold</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Random', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Random</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Dropped', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Dropped</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Plan to Watch', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Plan to Watch</a>
						{% elif outer_loop.index == 2 %}
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Watching', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Watching</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'On Hold', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">On Hold</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Random', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Random</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Dropped', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Dropped</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Plan to Watch', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Plan to Watch</a>
						{% elif outer_loop.index == 3 %}
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Watching', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Watching</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Completed', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Completed</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Random', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Random</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Dropped', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Dropped</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Plan to Watch', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Plan to Watch</a>
						{% elif outer_loop.index == 4 %}
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Watching', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Watching</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Completed', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Completed</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'On Hold', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">On Hold</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Dropped', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Dropped</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Plan to Watch', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Plan to Watch</a>
						{% elif outer_loop.index == 5 %}
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Watching', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Watching</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Completed', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Completed</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'On Hold', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">On Hold</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Random', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Random</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Plan to Watch', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Plan to Watch</a>
						{% elif outer_loop.index == 6 %}
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Watching', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Watching</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Completed', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Completed</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'On Hold', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">On Hold</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Random', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Random</a>
							<a data-dismiss="modal" class="list-group-item bg-dark modded" onclick="changeCategory('{{ data[0].id }}', 'Dropped', 'tr_{{ data[0].id }}', 'mod_{{ data[0].id }}', 'S_{{ data[0].id }}', 'E_{{ data[0].id }}', '{{ eps['{}'.format(data[0].id)] }}')">Dropped</a>
						{% endif %}
					</div>
				</div>
			</div>
		</div>

		<!----------- element metadata Modal ----------->
		<div class="modal fade" id="modal_{{ data[0].id }}" tabindex="-1" role="dialog" aria-labelledby="ModalCenterTitle" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered" role="document">
				<div class="modal-content" style="border-style: solid; border-width: 1px; border-color: white; background: #131418;">
					<div class="modal-body">
						<div class="modal-header">
							<h4 class="modal-title">{{ data[0].name }}</h4>
							<button type="button" class="close text-light" data-dismiss="modal" aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							<p><b>Original Name</b>: {{ data[0].original_name }}</p>
							<p><b>Genres</b>: {{ genres["{}".format(data[0].id)] }}</p>
							<p><b>First air date</b>: {{ first_air_date["{}".format(data[0].id)] }}</p>
							<p><b>Last air date</b>: {{ last_air_date["{}".format(data[0].id)] }}</p>
							<p><b>Homepage</b>: <a target="_blank" rel="noopener noreferrer" href="{{ data[0].homepage }}">{{ data[0].homepage }}</a></p>
							<p><b>In production</b>: {{ data[0].in_production }}</p>
							<p><b>Networks</b>: {{ networks["{}".format(data[0].id)] }}</p>
							<p><b>Created by</b>: {{ data[0].created_by }}</p>
							<p><b>Episode duration</b>: {{ data[0].episode_duration }} min</p>
							<p><b>Total seasons</b>: {{ data[0].total_seasons }}</p>
							<p><b>Total episodes</b>: {{ data[0].total_episodes }}</p>
							<p><b>Origin country</b>: {{ data[0].origin_country }}</p>
							<p><b>TMDb score</b>: {{ data[0].vote_average }}/10</p>
							<p><b>Status</b> : {{ data[0].status }}</p>
							<hr class="m-b-10 m-t-10">
							<p class="m-b-0"><b>Synopsis</b> : </p><p class="text-justify show-read-more">{{ data[0].synopsis }}</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	{% endfor %}
				</tbody>
			</table>
		</div>
{% endfor %}
<div class="modal_loading"></div>
{% endblock content %}


{% block script %}
{% if target_user_id == current_user.get_id() %}
<!------------ Jquery Autocomplete ------------->
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script type="text/javascript">
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _create: function() {
        this._super();
        this.widget().menu("option", "items", "> :not(.ui-autocomplete-category)");
    },
    _renderMenu: function(ul, items) {
        var that = this,
        currentCategory = "";
        $.each(items, function(index, item) {
            var li;

            if (item.nb_results === 0) {
                var a = "No results found"
                ul.append("<li class='disabled'>" + a + "</li>");
            } else {
                li = that._renderItemData(ul, item);
            }
        });
    },
    _renderItem: function(ul, item) {
		var $li = $('<li class="list-group">'),
			$img = $('<img>');

		$img.attr({
		    src: item.poster_path,
		    alt: item.name,
		    style: "width: 40px; height: 60px;"
		});

		$li.append('<a class="list-group-item bg-dark text-light">');
		$li.find('a').append($img).append(" "+item.name + " - " +item.first_air_date);

		return $li.appendTo(ul);
	}
});
</script>

<script type="text/javascript">
$(function() {
    $("#autocomplete").catcomplete({
        delay: 500,
        source: function(request, response) {
                $.getJSON("{{url_for('autocomplete', media=media_list)}}",{
                    q: request.term,
                },
                    function(data) {
                        response(data.matching_results);
                    }
                );
	    },
		minLength: 1,
        select: function(event, ui) {
            $("#autocomplete").val(ui.item.name);
            $("#element_id").val(ui.item.tmdb_id);

            $body = $("body");
            $.ajax ({
                type: "POST",
                url: "/add_element",
                contentType: "application/json",
                data: JSON.stringify({element_id: ui.item.tmdb_id, element_type: '{{ media_list }}' }),
                dataType: "json",
                beforeSend: function() { $body.addClass("loading"); },
                success: function(response) {
                    window.location.replace('/{{ media_list }}/table/{{ current_user.username }}');
                }
            });
        }
    });
});
</script>

<!---------------- Refresh ------------------->
<script type="text/javascript">
function refreshAll() {
    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/refresh_all_element",
        contentType: "application/json",
        data: JSON.stringify({element_type: '{{ media_list }}' }),
        beforeSend: function() { $body.addClass("loading"); },
        success: function(response) {
            window.location.replace('/{{ media_list }}/table/{{ current_user.username }}');
        }
    });
}


function refresh(element_id) {
    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/refresh_single_element",
        contentType: "application/json",
        data: JSON.stringify({element_id: element_id, element_type: "{{ media_list }}" }),
        dataType: "json",
        beforeSend: function() { $body.addClass("loading"); },
        success: function(response) {
            window.location.replace('/{{ media_list }}/table/{{ current_user.username }}');
        }
    });
}
</script>

<!---------------- Update/Change/Remove element ------------------->
<script type="text/javascript">
function changeCategory(element_id, new_category, tr_id, mod_id, seas_drop_id, ep_drop_id, seas_data) {
    if (new_category === 'Watching') {
        var completed = 'Completed';
        var on_hold = 'On Hold';
        var random = 'Random';
        var dropped = 'Dropped';
        var plan_to_watch = 'Plan to Watch';

        $("#"+mod_id+ " a").filter(":contains('Watching')").remove()
        $("#"+mod_id+ " a").filter(":contains('Completed')").remove()
        $("#"+mod_id+ " a").filter(":contains('On Hold')").remove()
        $("#"+mod_id+ " a").filter(":contains('Random')").remove()
        $("#"+mod_id+ " a").filter(":contains('Dropped')").remove()
        $("#"+mod_id+ " a").filter(":contains('Plan to Watch')").remove()

        $("#"+mod_id).prepend(
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + completed + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Completed</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + on_hold + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>On Hold</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + random + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Random</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + dropped + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Dropped</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + plan_to_watch + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Plan to Watch</a>"
        );
        $("#" + tr_id).prependTo("#tbody_WATCHING");
        $('.modal').modal("hide");
    }

    if (new_category === 'Completed') {
        var watching = 'Watching';
        var on_hold = 'On Hold';
        var random = 'Random';
        var dropped = 'Dropped';
        var plan_to_watch = 'Plan to Watch';

        $("#"+mod_id+ " a").filter(":contains('Watching')").remove()
        $("#"+mod_id+ " a").filter(":contains('Completed')").remove()
        $("#"+mod_id+ " a").filter(":contains('On Hold')").remove()
        $("#"+mod_id+ " a").filter(":contains('Random')").remove()
        $("#"+mod_id+ " a").filter(":contains('Dropped')").remove()
        $("#"+mod_id+ " a").filter(":contains('Plan to Watch')").remove()

        $("#"+mod_id).prepend(
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + watching + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Watching</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + on_hold + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>On Hold</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + random + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Random</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + dropped + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Dropped</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + plan_to_watch + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Plan to Watch</a>"
        );
        $("#" + tr_id).prependTo("#tbody_COMPLETED");
        $('.modal').modal("hide");

        var season_data = JSON.parse("[" + seas_data + "]");
        var episode_drop = document.getElementById(ep_drop_id);

        var seasons_length = $('#'+seas_drop_id).children('option').length;
        console.log(seasons_length);
        var seasons_index = (seasons_length - 1);
        console.log(seasons_index);
        $('#'+seas_drop_id).prop('selectedIndex', seasons_index);

        episode_drop.length = 1;

        for (i = 2; i <= season_data[0][seasons_index]; i++) {
            let opt = document.createElement("option");
            opt.text = "Episode " + i;
            episode_drop.appendChild(opt);
        }
        $('#'+ep_drop_id).prop('selectedIndex', season_data[0][seasons_index]-1);
    }

    if (new_category === 'On Hold') {
        var completed = 'Completed';
        var watching = 'Watching';
        var random = 'Random';
        var dropped = 'Dropped';
        var plan_to_watch = 'Plan to Watch';

        $("#"+mod_id+ " a").filter(":contains('Watching')").remove()
        $("#"+mod_id+ " a").filter(":contains('Completed')").remove()
        $("#"+mod_id+ " a").filter(":contains('On Hold')").remove()
        $("#"+mod_id+ " a").filter(":contains('Random')").remove()
        $("#"+mod_id+ " a").filter(":contains('Dropped')").remove()
        $("#"+mod_id+ " a").filter(":contains('Plan to Watch')").remove()

        $("#"+mod_id).prepend(
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + watching + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Watching</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + completed + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Completed</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + random + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Random</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + dropped + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Dropped</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + plan_to_watch + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Plan to Watch</a>"
        );
        $("#" + tr_id).prependTo("#tbody_ON_HOLD");
        $('.modal').modal("hide");
    }

    if (new_category === 'Random') {
        var completed = 'Completed';
        var on_hold = 'On Hold';
        var watching = 'Watching';
        var dropped = 'Dropped';
        var plan_to_watch = 'Plan to Watch';

        $("#"+mod_id+ " a").filter(":contains('Watching')").remove()
        $("#"+mod_id+ " a").filter(":contains('Completed')").remove()
        $("#"+mod_id+ " a").filter(":contains('On Hold')").remove()
        $("#"+mod_id+ " a").filter(":contains('Random')").remove()
        $("#"+mod_id+ " a").filter(":contains('Dropped')").remove()
        $("#"+mod_id+ " a").filter(":contains('Plan to Watch')").remove()

        $("#"+mod_id).prepend(
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + watching + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Watching</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + completed + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Completed</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + on_hold + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>On Hold</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + dropped + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Dropped</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + plan_to_watch + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Plan to Watch</a>"
        );
        $("#" + tr_id).prependTo("#tbody_RANDOM");
        $('.modal').modal("hide");
    }

    if (new_category === 'Dropped') {
        var completed = 'Completed';
        var on_hold = 'On Hold';
        var random = 'Random';
        var watching = 'Watching';
        var plan_to_watch = 'Plan to Watch';

        $("#"+mod_id+ " a").filter(":contains('Watching')").remove()
        $("#"+mod_id+ " a").filter(":contains('Completed')").remove()
        $("#"+mod_id+ " a").filter(":contains('On Hold')").remove()
        $("#"+mod_id+ " a").filter(":contains('Random')").remove()
        $("#"+mod_id+ " a").filter(":contains('Dropped')").remove()
        $("#"+mod_id+ " a").filter(":contains('Plan to Watch')").remove()

        $("#"+mod_id).prepend(
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + watching + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Watching</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + completed + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Completed</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + on_hold + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>On Hold</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + random + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Random</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + plan_to_watch + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Plan to Watch</a>"
        );
        $("#" + tr_id).prependTo("#tbody_DROPPED");
        $('.modal').modal("hide");
    }

    if (new_category === 'Plan to Watch') {
        var completed = 'Completed';
        var on_hold = 'On Hold';
        var random = 'Random';
        var dropped = 'Dropped';
        var watching = 'Watching';

        $("#"+mod_id+ " a").filter(":contains('Watching')").remove()
        $("#"+mod_id+ " a").filter(":contains('Completed')").remove()
        $("#"+mod_id+ " a").filter(":contains('On Hold')").remove()
        $("#"+mod_id+ " a").filter(":contains('Random')").remove()
        $("#"+mod_id+ " a").filter(":contains('Dropped')").remove()
        $("#"+mod_id+ " a").filter(":contains('Plan to Watch')").remove()

        $("#"+mod_id).prepend(
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + watching + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Watching</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + completed + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Completed</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + on_hold + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>On Hold</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + random + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Random</a>" +
            "<a data-dismiss='modal' class='list-group-item text-light bg-dark modded' onclick='changeCategory(\"" + element_id + "\", \"" + dropped + "\", \"" + tr_id + "\", \"" + mod_id + "\", \"" + seas_drop_id + "\", \"" + ep_drop_id + "\", \"" + seas_data + "\")'>Dropped</a>"
        );
        $("#" + tr_id).prependTo("#tbody_PLAN_TO_WATCH");
        $('.modal').modal("hide");
    }

    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/change_element_category",
        contentType: "application/json",
        data: JSON.stringify({status: new_category, element_id: element_id, element_type: "{{ media_list }}" }),
        dataType: "json",
        success: function(response) {
            console.log("ok"); }
    });
}
</script>

<script type="text/javascript">
function delete_element(element_id, tr_id) {
    if (!confirm("Are you sure you want to delete this element from your list?")){
        return false;
    }
    $("#"+tr_id).remove();
    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/delete_element",
        contentType: "application/json",
        data: JSON.stringify({delete: element_id, element_type: "{{ media_list }}" }),
        dataType: "json",
        success: function(response) {
            console.log("ok"); }
    });
}
</script>

<script type="text/javascript">
function updateEpisode(element_id, episode){
    let selected_episode = episode.selectedIndex

    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/update_element_episode",
        contentType: "application/json",
        data: JSON.stringify({episode: selected_episode, element_id: element_id, element_type: "{{ media_list }}" }),
        dataType: "json",
        success: function(response) {
            console.log("ok"); }
    });
}
</script>

<script type="text/javascript">
function updateSeason(element_id, value, seas_data, ep_drop_id) {
    var selected_season = value.selectedIndex;
    var episode_drop = document.getElementById(ep_drop_id);
    var season_data = JSON.parse("[" + seas_data + "]");
    console.log(season_data);

    episode_drop.length = 1;

    for (i = 2; i <= season_data[0][selected_season]; i++) {
        let opt = document.createElement("option");
        opt.text = "Episode " + i;
        episode_drop.appendChild(opt);
    }

    $body = $("body");
    $.ajax ({
        type: "POST",
        url: "/update_element_season",
        contentType: "application/json",
        data: JSON.stringify({season: selected_season, element_id: element_id, element_type: "{{ media_list }}" }),
        dataType: "json",
        success: function(response) {
            console.log("ok"); }
    });
}
</script>

<!------------------ Set score --------------------->
<script type="text/javascript">
function add_score(new_score, edit_id, element_id) {
    var new_sc = document.getElementById(new_score);
    var edit_score_value = document.getElementById(edit_id).value;
    var edit_score = document.getElementById(edit_id);

    if (event.which == 13 || event.keyCode == 13) {
        if (edit_score_value > 10 || edit_score_value < 0) {
            window.alert("Your number must be between 0-10");
        } else if (isNaN(edit_score_value) == true) {
            window.alert("Your must enter a number between 0-10");
        } else if ($.trim($(edit_score).val()).length == 0) {
            $(new_sc).text("-");
            edit_score.className = "d-none";
        } else {
            edit_score.className = "d-none";
            $(new_sc).text(edit_score_value);

            $body = $("body");
            $.ajax ({
                type: "POST",
                url: "/add_score_element",
                contentType: "application/json",
                data: JSON.stringify({score_val: edit_score_value, element_id: element_id, element_type: '{{ media_list }}' }),
                dataType: "json",
                success: function(response) {
                    console.log('ok'); }
            });
            return false;
        }
        return true;
    }
}

function edit_score(edit_id, new_id) {
    var edit = document.getElementById(edit_id);

    if (edit.className === "d-none"){
        edit.className = "visible";
        document.getElementById(new_id).innerHTML = "";
        $(edit).val('');
        $(edit).focus();
    } else {
        edit.className = "d-none";
    }
}
</script>
{% endif %}

<!---------------- Expand/collaspe category -------------------->
<script type="text/javascript">
function turn(category, arrow) {
    var arrow = document.getElementById(arrow);
    var category = document.getElementById(category);

    if (category.className === "d-flex flex-wrap table-responsive-sm collapsing") {
    } else if (arrow.className === "collapse_all fas fa-sm fa-chevron-right") {
        arrow.className = "collapse_all fas fa-sm fa-chevron-down";
    } else {
        arrow.className = "collapse_all fas fa-sm fa-chevron-right";
    }
}
</script>

<script type="text/javascript">
function hide_all_cat() {
    $('.collapse.d-flex').collapse('hide');
    $('#collapse_show').text('Expand all');
    $('#collapse_container').attr('onclick', 'show_all_cat()');
    $('.collapse_all').attr('class', 'collapse_all fas fa-sm fa-chevron-right');
}

function show_all_cat() {
    $('.collapse.d-flex').collapse('show');
    $('#collapse_show').text('Collapse all');
    $('#collapse_container').attr('onclick', 'hide_all_cat()');
    $('.collapse_all').attr('class', 'collapse_all fas fa-sm fa-chevron-down');
}
</script>

<!---------------- Synopsis -------------------->
<script type="text/javascript">
$(document).ready(function(){
	var maxLength = 200;
	$(".show-read-more").each(function(){
		var myStr = $(this).text();
		if($.trim(myStr).length > maxLength){
			var newStr = myStr.substring(0, maxLength);
			var removedStr = myStr.substring(maxLength, $.trim(myStr).length);
			$(this).empty().html(newStr);
			$(this).append('<a href="javascript:void(0);" class="read-more"> read more...</a>');
			$(this).append('<span class="more-text">' + removedStr + '</span>');
		}
	});

	$(".read-more").click(function(){
		$(this).siblings(".more-text").contents().unwrap();
		$(this).remove();
	});
});
</script>

<!----------- Show/hide sidenav bar ------------>
<script type="text/javascript">
function openNav() {
    document.getElementById("mySidenav").style.width = "180px";
    $('#nav_container').attr('onclick', 'closeNav()');
}
function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    $('#nav_container').attr('onclick', 'openNav()');
}
</script>
{% endblock script %}
