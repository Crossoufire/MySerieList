{% extends 'media_sheet_base.html' %}


{% block hr_color %}
    hr {margin-top: 5px; border-top: 1px solid #8c7821;}
{% endblock hr_color %}


{% block cat_select %}
    <select id="category-dropdown" class="text-light text-center cat-drop" onchange="changeCategoryMovies(
    '{{ media.id }}', this)">
        <option {% if list_info.status == 'Completed' %}selected="selected"{% endif %}>Completed</option>
        <option {% if list_info.status == 'Plan to Watch' %}selected="selected"{% endif %}>Plan to Watch</option>
    </select>
{% endblock cat_select %}


{% block add_more %}
{% endblock add_more %}


{% block add_redo %}
    <div id="rewatch-row" class="row m-l-15 m-r-15" data-toggle="tooltip" title="How many time you rewatched this media.
     Do not count the inital completion." {% if list_info.status == 'Completed'%}{% else %}style="display: none;"{% endif %}>
        <div class="col-4"><b>Rewatched:</b></div>
        <div class="col-8">
            <label for="rewatched-dropdown"></label>
            <select id="rewatched-dropdown" class="text-light text-center cat-drop" onchange="updateRewatched(
             '{{ media.id }}', this, '{{ media_list }}')">
                {% for i in range(0, 11) %}
                    <option {% if i == list_info.rewatched %}selected="selected"{% endif %} value="{{ i }}">
                        &nbsp;{{ i }}&nbsp;
                    </option>
                {% endfor %}
            </select>
            <i id="rewatched-loading" class="fas fa-spinner fast-spin" style="display: none;"></i>
            &nbsp;<i id="rewatched-check" class="fas fa-check" style="display: none;"></i>
        </div>
    </div>
{% endblock add_redo %}


{% block information %}
    <div class="col-6">
        <ul class="list-unstyled">
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-star"></i><b>&nbsp; TMDb Score</b></h5>
                <i class="fas fa-ticket-alt fa-3x media-ticket" value="{{ media.vote_average }}"></i>
                <div class="movie-vote-average">{{ media.vote_average }}</div>
                <div class="movie-vote-count">({{ media.vote_count|int }} votes)</div>
            </li>
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-video"></i><b>&nbsp; Directed by</b></h5>
                <div>{{ media.director }}</div>
            </li>
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-calendar-check"></i><b>&nbsp; Release date</b></h5>
                <div>{{ media.release_date }}</div>
            </li>
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-clock"></i><b>&nbsp; Runtime</b></h5>
                <div>{{ media.duration//60 }} h {{ '%02d'|format(media.duration%60) }} min</div>
            </li>
            <li>
                <h5 class="mb-1 text-media"><i class="fas fa-flag"></i><b>&nbsp; Original language</b></h5>
                {% if media.original_language == 'en' %}
                    <span class="flag-icon flag-icon-us"></span>&nbsp;
                {% elif media.original_language == 'ja' %}
                    <span class="flag-icon flag-icon-jp"></span>&nbsp;
                {% else %}
                    <span class="flag-icon flag-icon-{{ media.original_language }}"></span>
                {% endif %}
                &nbsp;<span>{{ media.original_language|capitalize }}</span>
            </li>
        </ul>
    </div>
    <div class="col-6">
        <ul class="list-unstyled">
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-theater-masks"></i><b>&nbsp; Genres</b></h5>
                <div>{{ media.get_genres() }}</div>
            </li>
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-user"></i><b>&nbsp; Actors</b></h5>
                {% if media.actors == 'Unknown' %}
                    <div><i>No actors found</i></div>
                {% else %}
                    <div>{{ media.get_actors() }}</div>
                {% endif %}
            </li>
            <li class="m-b-15">
                <h5 class="mb-1 text-media"><i class="fas fa-tag"></i><b>&nbsp; Tagline</b></h5>
                <div>{{ media.tagline }}</div>
            </li>
            <li>
                <h5 class="mb-1 text-media"><i class="fas fa-home"></i><b>&nbsp; Homepage</b></h5>
                {% if media.homepage != 'Unknown' %}
                    <a style="word-break: break-all;" href="{{ media.homepage }}">{{ media.homepage }}</a>
                {% else %}
                    <i>No homepage available</i>
                {% endif %}
            </li>
        </ul>
    </div>
{% endblock information %}


{% block more_info %}
    <h4><i class="fas fa-dollar-sign"></i>&nbsp;&nbsp; <b>Box-Office</b></h4><hr>
    <ul class="text-left p-0">
        <li class="m-b-10">
            <div class="row">
                <div class="col-5">
                    <i class="fas fa-coins"></i>&nbsp; Budget
                </div>
                <div class="col-7">
                    {% if media.budget != 0 %}
                        {{ "{:,.0f}".format(media.budget).replace(',', ' ') }} $
                    {% else %}
                        <i>No data available</i>
                    {% endif %}
                </div>
            </div>
        </li>
        <li class="m-b-10">
            <div class="row">
                <div class="col-5">
                   <i class="fas fa-coins"></i>&nbsp; Revenue
                </div>
                <div class="col-7">
                   {% if media.revenue != 0 %}
                        {{ "{:,.0f}".format(media.revenue).replace(',', ' ') }} $
                    {% else %}
                        <i>No data available</i>
                    {% endif %}
                </div>
            </div>
        </li>
    </ul>
{% endblock more_info %}


{% block follows_info %}
    {% for follow in media.in_follows_lists() %}
        <div class="col col-lg-4 col-md-4 col-sm-6 col-12 m-b-35">
            <a href="{{ url_for('users.account', user_name=follow[0].username) }}">
                <div class="follow-div text-light">
                    <div class="text-light">
                        <img class="follow-img" src="{{ url_for('static', filename='profile_pics/'
                        +follow[0].image_file) }}" alt=""/>
                        <h5 style="display: inline-block;"><b>&nbsp;&nbsp;{{ follow[0].username }}</b></h5>
                        <i class="fa-sm fa-heart m-l-10{% if follow[1].favorite %} fas f-favorited{% else %}
                        far f-no-fav{% endif %}"></i>
                    </div>
                    <hr class="m-b-8" style="border-color: gray;">
                    <i class="fas fa-sm fa-star"></i>
                    <b>{% if follow[1].score == -1 or follow[1].score == None %}&nbsp;Score:&nbsp; ---
                    {% else %}&nbsp;Score:&nbsp; {{ follow[1].score }}{% endif %}</b>
                    <div class="follow-status" value="{{ follow[1].status.value }}">
                        <i class="fas fa-list"></i>
                        <b>&nbsp;Status:&nbsp;{{ follow[1].status.value }}</b>
                    </div>
                    {% if follow[1].status.value == 'Completed' %}
                        <i class="fas fas-sm fa-redo"></i>
                        <b>&nbsp;Rewatched:&nbsp; {{ follow[1].rewatched }}</b>
                    {% endif %}
                    {% if follow[1].comment %}
                        <div class="m-t-10"><b>Comment:</b></div>
                        <p class="text-justify commentary"><i>{{ follow[1].comment }}</i></p>
                    {% endif %}
                </div>
            </a>
        </div>
    {% endfor %}
{% endblock follows_info %}
