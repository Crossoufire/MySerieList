{% extends 'layout.html' %}


{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mymedialist.css') }}">
    <style rel="stylesheet">
        {% if media_list == 'serieslist' %}
            hr {border-top: 1px solid #216e7d;}
        {% elif media_list == 'animelist' %}
            hr {border-top: 1px solid #945141;}
        {% elif media_list == 'movieslist' %}
            hr {border-top: 1px solid #8c7821;}
        {% endif %}
    </style>
{% endblock css %}


{% block content %}
<<<<<<< HEAD
    <section class="return-icons-and-search-bar">
        <div class="row no-gutters m-t-30">
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 mobile-margin mobile-center">
                <a class="fas fa-lg fa-user m-r-10 return-icon text-grey" data-toggle="tooltip" title="{{ username }}"
                   href="{{ url_for('users.account', user_name=username) }}"></a>
                {% block return_icon scoped %}
                {% endblock return_icon %}
                {% if user_id != current_user.get_id() %}
                    <div class="shared-pie" data-toggle="tooltip"
                         title="{{ common_elements[0] }}/{{ common_elements[1] }} shared ({{ common_elements[2] }}%)"
                         style="background: conic-gradient(#8a7a6c {{ common_elements[2] }}%, #040404 0);">
                    </div>
                {% endif %}
            </div>
            <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 input-container mobile-margin">
                <form method="GET" action="{{ url_for('main.mymedialist', media_list=media_list, user_name=username,
                category='Search', genre=genre, sorting=sorting, page_val=1) }}">
                    {{ search_form.q(class='modded-input', placeholder=search_form.q.label.text,
                       onfocus="this.placeholder = '';",
                       onblur="this.placeholder = "+"'"+search_form.q.label.text+"'"+";") }}
                </form>
            </div>
        </div>
    </section>

    <section class="media-list-categories">
        <div class="categories-css p-1">
            {% block categories scoped %}
            {% endblock categories %}
=======
    <div class="back-image p-b-15">
        <div class="d-flex flex-wrap center-mobile">
            <div class="m-l-30 m-t-20 icons-mobile">
                <a class="fas fa-lg fa-user m-r-8 return-icon" href="/account/{{ username }}"
                   data-toggle="tooltip" title="{{ username }}" style="color: grey;"></a>
                {% if media_list == 'serieslist' %}
                    <a class="fas fa-lg fa-torii-gate m-r-8 return-icon text-anime" data-toggle="tooltip"
                       href="/animelist/{{ username }}" title="Anime list"></a>
                    <a class="fas fa-lg fa-film m-r-8 return-icon text-movies" data-toggle="tooltip"
                       href="/movieslist/{{ username }}" title="Movies list"></a>
                    <a class="fas fa-lg fa-gamepad m-r-8 return-icon text-dark" data-toggle="tooltip"
                       href="/gameslist/{{ username }}" title="Games list"></a>
                {% elif media_list == 'animelist' %}
                    <a class="fas fa-lg fa-tv m-r-8 return-icon-tv text-series" data-toggle="tooltip"
                       href="/serieslist/{{ username }}" title="Series list"></a>
                    <a class="fas fa-lg fa-film m-r-8 return-icon text-movies" data-toggle="tooltip"
                       href="/movieslist/{{ username }}" title="Movies list"></a>
                    <a class="fas fa-lg fa-gamepad m-r-8 return-icon text-dark" data-toggle="tooltip"
                       href="/gameslist/{{ username }}" title="Games list"></a>
                {% elif media_list == 'movieslist' %}
                    <a class="fas fa-lg fa-tv m-r-8 return-icon-tv text-series" data-toggle="tooltip"
                       href="/serieslist/{{ username }}" title="Series list"></a>
                    <a class="fas fa-lg fa-torii-gate m-r-8 return-icon text-anime" data-toggle="tooltip"
                       href="/animelist/{{ username }}" title="Anime list"></a>
                    <a class="fas fa-lg fa-gamepad m-r-8 return-icon text-dark" data-toggle="tooltip"
                       href="/gameslist/{{ username }}" title="Games list"></a>
                {% elif media_list == 'gameslist' %}
                    <a class="fas fa-lg fa-tv m-r-8 return-icon-tv text-series" data-toggle="tooltip"
                       href="/serieslist/{{ username }}" title="Series list"></a>
                    <a class="fas fa-lg fa-torii-gate m-r-8 return-icon text-anime" data-toggle="tooltip"
                       href="/animelist/{{ username }}" title="Anime list"></a>
                    <a class="fas fa-lg fa-film m-r-8 return-icon text-movies" data-toggle="tooltip"
                       href="/movieslist/{{ username }}" title="Movies list"></a>
                {% endif %}
            </div>
            {% if user_id != current_user.get_id() %}
                <div class="ml-auto m-r-30 m-t-20">
                    <div class="text-center common-media">
                        You share {{ common_elements[0] }}/{{ common_elements[1] }} media ({{ common_elements[2] }}%)
                    </div>
                    <div class="common-media-meter">
                        <span class="common-media-meter-bar" style="width: {{ common_elements[2] }}%;"></span>
                    </div>
                </div>
            {% endif %}
        </div>
        <hr class="header-bar">
        <div class="center-mobile d-flex flex-wrap m-t-20">
            <div class="ml-auto mr-auto">
                <input id="search-input" class="modded-input" placeholder="&#128269; Search..."
                onfocus="this.placeholder = '';" onblur="this.placeholder = '&#128269; Search...';">
                <select id="select-option" class="search-select">
                    <option {% if option == 'title' %}selected="selected"{% endif %} value="title">Title</option>
                    {% if media_list == 'movieslist' %}
                        <option {% if option == 'director' %}selected="selected"{% endif %} value="director">Director</option>
                    {% endif %}
                    <option {% if option == 'actor' %}selected="selected"{% endif %} value="actor">Actor</option>
                    <option {% if option == 'genre' %}selected="selected"{% endif %} value="genre">Genre</option>
                </select>
            </div>
        </div>
        <div class="d-flex flex-wrap" style="justify-content: center;">
            {% block button scoped %}
            {% endblock button %}
        </div>
    </div>
    <div class="{% if media_list == 'serieslist' %}bg-series-opa {% elif media_list == 'animelist' %}bg-anime-opa
    {% else %}bg-movies-opa {% endif %} p-t-4 p-b-4">
        <div class="mobile-sorting">
            <label class="m-l-10 mb-0"><b>Sort by:</b></label>
            <select class="m-l-8" onchange="sort_medialist(this)">
                <option {% if sort_val == 'title' %}selected="selected"{% endif %} value="title">Title</option>
                <option {% if sort_val == 'score' %}selected="selected"{% endif %} value="score">Score</option>
                <option {% if sort_val == 'rewatch' %}selected="selected"{% endif %} value="rewatch">Rewatch</option>
                <option {% if sort_val == 'comment' %}selected="selected"{% endif %} value="comment">Comment</option>
                <option {% if sort_val == 'playtime' %}selected="selected"{% endif %} value="playtime">Playtime</option>
            </select>
            {% if user_id != current_user.get_id() %}
                <input id="shared-check" class="m-l-15" type="checkbox" value="{{ filter_val }}" onclick="filter_medialist()"
                {% if filter_val == 'check' %}checked {% endif %}>
                <b> Show Shared</b>
            {% endif %}
            <div class="t-pages float-r m-r-10"><b>Total pages: {{ info_pages['total_pages'] }}</b></div>
>>>>>>> parent of 21634e6 (testing games)
        </div>
    </section>

    <section class="title-sorting-filtering-genres">
        <h4 class="cat-title">
            {{ category|upper }}{% if category == "Search" %} RESULTS FOR "{{ search_q }}" {% endif %}
            ({{ info_pages['total_media'] }})
        </h4>
        <div class="sort-container">
    {#        {% if user_id != current_user.get_id() %}#}
    {#            <a class="m-r-15" style="display: inline-block;"#}
    {#               href="/{{ media_list }}/{{ username }}/{{ category }}/genre/{{ genre }}/by/#}
    {#                {{ sorting }}/page/1?filter={{ filter_val }}">#}
    {#                <b class="text-grey"> Shared#}
    {#                    <i class="fas fa-{% if filter_val == True %}check{% else %}times{% endif %}"></i>#}
    {#                </b>#}
    {#            </a>#}
    {#        {% endif %}#}
            <li class="nav-item dropdown li-genre-sort text-grey">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown"><b>Genre {{ genre|upper }}</b></a>
                <div class="dropdown-menu genre-drop">
                    {% block add_genres scoped %}
                    {% endblock add_genres %}
                </div>
            </li>
            <li class="nav-item dropdown li-genre-sort text-grey">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown"><b>Sort {{ sorting|upper }}</b></a>
                <div class="dropdown-menu sort-drop">
                    {% set all_sort = ['Title A-Z','Title Z-A','Score +','Score -','Score TMDb +','Score TMDb -',
                    'Comments','Rewatch','Release date +','Release date -'] %}
                    {% for so in all_sort %}
                        <a class="dropdown-item text-light" href="{{ url_for('main.mymedialist', media_list=media_list,
                         user_name=username, category=category, genre=genre, sorting=so,
                         page_val=1) }}{% if category == 'Search' %}?q={{ search_q }}{% endif %}">
                            <div>{{ so }}</div>
                        </a>
                    {% endfor %}
                </div>
            </li>
        </div>
        <hr class="mt-2 pb-3 mb-0">
    </section>

    <section class="media-display">
        <div class="row m-b-40">
            {% for item in media_items %}
                <div id="card_{{ item.id }}" values="{% block data scoped %}{% endblock data %}"
                cat="{{ item.category }}" class="card-container col-xl-2 col-lg-2 col-md-3 col-sm-3 col-4">
                    <div class="card bg-transparent">
                        <div class="view overlay">
                            <img class="card-img-top" height="300" width="200" src="{{ item.cover }}" alt=""
                            style="height: auto;"/>
                            <a class="mask flex-center rgba-black-strong" href="{{ url_for('main.media_sheet',
                            media_type=item.media, media_id=item.id) }}">
                                <span class="font-mask text-center text-light">{{ item.display_name }}</span>
                            </a>
                            {% if category == 'Search' or category == 'All' %}
                                <div class="bottom-card-cat{% if media_list =='movieslist' %}-movie {% endif %}">
                                    {{ item.category }}</div>
                            {% endif %}
                            {% if user_id == current_user.get_id() %}
                                <a class="card-btn-top-left fas fa-bars text-light"
                                   onclick="chargeButtons(card_{{ item.id }})"></a>
                                <a class="card-btn-toop-right fas fa-trash text-light"
                                   onclick="deleteElement(card_{{ item.id }}, '{{ media_list }}')"></a>
                            {% else %}
                                {% if item.common %}
                                    <div class="card-ribbon"></div>
                                {% else %}
                                    <a class="card-btn-top-left fas fa-plus text-light"
                                       onclick="ChargeButtonsOther(card_{{ item.id }})"></a>
                                {% endif %}
                            {% endif %}
                        </div>
                        <div class="bottom-card-info{% if media_list =='movieslist' %}-movie {% endif %}">
                            <div class="row no-gutters" style="opacity: 0.7;">
                                <div class="col p-0">
                                    <a class="fa-heart {% if item.favorite %} fas favorited {% else %}
                                    far {% endif %} {% if user_id != current_user.get_id() %}
                                    disabled {% endif %}" data-toggle='tooltip' title="Favorite"
                                       onclick="addFavorite(this,'{{ item.id }}','{{ media_list }}')">
                                    </a>
                                </div>
                                <div class="col p-0">
                                    <a id="score_{{ item.id }}" class="{% if user_id != current_user.get_id() %}
                                       disabled {% endif %}" data-toggle="tooltip" title="Score /10"
                                       onclick="scoreDrop(this, {{ item.id }}, '{{ media_list }}')">
                                        {{ item.score }}
                                    </a>
                                </div>
                                <div class="col p-0">
                                    <span id="com_{{ item.id }}" style="display: none;">{{ item.comment }}</span>
                                    {% if user_id == current_user.get_id() %}
                                        <a class="fa-comment-alt text-light{% if item.comment %} fas commented{% else %}
                                        far{% endif %}" data-toggle='tooltip' title="Comments" {% if item.comment %}
                                        onclick="showComment(card_{{ item.id }}, '{{ item.media }}', '{{ item.id }}',
                                        true)" href="{{ url_for('main.write_comment', media_type=item.media,
                                        media_id=item.id) }}"{% endif %}></a>
                                    {% else %}
                                        <a class="fa-comment-alt text-light {% if item.comment %}fas commented {% else %}
                                        far disabled{% endif %}" data-toggle="tooltip" title="Comments"
                                        {% if item.comment %} onclick="showComment(card_{{ item.id }}, '{{ item.media }}',
                                        '{{ item.id }}', false)"{% endif %}></a>
                                    {% endif %}
                                </div>
                                <div class="col" {% if item.category == 'Completed' %}style="display: block;"
                                {% else %} style="display: none;"{% endif %}>
                                    <a id="rew_{{ item.id }}" class="{% if user_id != current_user.get_id() %}
                                     disabled {% endif %}" data-toggle="tooltip" title="How many time you rewatched this
                                     media. Do not count the inital completion." onclick="rewatchDrop(this,
                                     {{ item.id }}, '{{ media_list }}')">
                                        {{ item.rewatched }}
                                    </a>
                                </div>
                            </div>
                        </div>
                        {% block seas_eps_drop scoped %}
                        {% endblock seas_eps_drop %}
                    </div>
                </div>
            {% endfor %}
        </div>
    </section>

    <section class="the-pagination">
        <ul class="pagination flex-wrap m-b-50 pagination-css">
            {% for i in range(info_pages['total_pages']) %}
                <li class="page-item {% if i + 1 == info_pages['actual_page'] %}active {% endif %}">
                    <a class="page-link text-light" href="{{ url_for('main.mymedialist', media_list=media_list,
                     user_name=username, category=category, genre=genre, sorting=sorting,
                     page_val=i + 1) }}{% if category == 'Search' %}?q={{ search_q }}{% endif %}">
                        {{ '{:02d}'.format(i + 1) }}
                    </a>
                </li>
            {% endfor %}
        </ul>
    </section>
{% endblock content %}


{% block script %}
    <script src="{{ url_for('static', filename='js/medialist_base.js') }}"></script>
    {% block javascript scoped %}
    {% endblock javascript %}
{% endblock script %}
